import{V as x,ac as h,ad as w,h as b,J as v,r as l,o as y,L as C,K as M,M as N,C as r,y as q,B as s,_ as A,N as S,z as u}from"./AYE48R63.js";import{u as B}from"./DEeRNTLe.js";import{_ as L}from"./DlAUqK2U.js";import{_ as O,a as k}from"./CcDJ7miJ.js";import{_ as P}from"./Dzn1Jdvg.js";const $='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',z=x({name:"QSpinnerDots",props:h,setup(i){const{cSize:t,classes:n}=w(i);return()=>b("svg",{class:n.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:$})}}),E={__name:"google-callback",setup(i){const t=M(),n=v(),{apiBase:_}=B();l(!0);const m=l(null);return y(async()=>{console.log("üîÑ Google OAuth ÏΩúÎ∞± Ï≤òÎ¶¨ ÏãúÏûë");try{const o=new URLSearchParams(window.location.search),e=o.get("code"),a=o.get("error");if(console.log("üîç URL ÌååÎùºÎØ∏ÌÑ∞:",{code:e,error:a}),a)throw console.error("‚ùå OAuth Ïò§Î•ò:",a),new Error(`OAuth Ïò§Î•ò: ${a}`);if(!e)throw console.error("‚ùå Ïù∏Ï¶ù ÏΩîÎìú ÏóÜÏùå"),new Error("Ïù∏Ï¶ù ÏΩîÎìúÎ•º Î∞õÏßÄ Î™ªÌñàÏäµÎãàÎã§.");console.log("‚úÖ Ïù∏Ï¶ù ÏΩîÎìú Î∞õÏùå:",e.substring(0,20)+"..."),console.log("üåê ÏÑúÎ≤ÑÎ°ú Ïù∏Ï¶ù ÏΩîÎìú Ï†ÑÏÜ° ÏãúÏûë");const c=await C.post(`${_}/auth/google`,{code:e,redirect_uri:`${window.location.origin}/google-callback`},{withCredentials:!0,timeout:1e4});console.log("‚úÖ ÏÑúÎ≤Ñ ÏùëÎãµ:",c.data),c.data.result===!0?(n.setLoggedIn(),console.log("‚úÖ Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ"),t.push("/dashboard")):(console.error("‚ùå ÏÑúÎ≤Ñ Ïù∏Ï¶ù Ïã§Ìå®"),n.setLoggedOut(),t.push("/login"))}catch(o){console.error("‚ùå OAuth ÏΩúÎ∞± Ï≤òÎ¶¨ Ïò§Î•ò:",o),m.value=o.message,n.setLoggedOut(),setTimeout(()=>{t.push("/login")},3e3)}}),(o,e)=>{const a=z,c=S,p=A,d=P,g=k,f=O;return q(),N(f,null,{default:r(()=>[s(g,null,{default:r(()=>[s(d,{class:"flex flex-center"},{default:r(()=>[s(p,{style:{width:"400px"}},{default:r(()=>[s(c,{class:"text-center"},{default:r(()=>[s(a,{color:"primary",size:"50px"}),e[0]||(e[0]=u("div",{class:"text-h6 q-mt-md"},"Íµ¨Í∏Ä Î°úÍ∑∏Ïù∏ Ï≤òÎ¶¨ Ï§ë...",-1)),e[1]||(e[1]=u("div",{class:"text-body2 text-grey q-mt-sm"}," Ïû†ÏãúÎßå Í∏∞Îã§Î†§Ï£ºÏÑ∏Ïöî. ",-1))]),_:1,__:[0,1]})]),_:1})]),_:1})]),_:1})]),_:1})}}},D=L(E,[["__scopeId","data-v-a1711172"]]);export{D as default};
