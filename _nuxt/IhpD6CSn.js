import{J as P,k as S,r as y,o as C,L as T,K as D,M as q,C as e,y as p,B as o,_ as G,N as V,z as l,S as z,x as A,T as $,U as E,D as b,A as i,P as K,Q as M}from"./gW4XaDQe.js";import{g as O,a as J}from"./CBC8_xwp.js";import{u as Q}from"./CSTdja__.js";import{_ as j}from"./DlAUqK2U.js";import{_ as F,a as H}from"./DGav2OGV.js";import{_ as W}from"./Bi-CW2-s.js";import{_ as X,a as Y}from"./DSPiY0No.js";import{_ as Z}from"./BWEAjELS.js";const oo={key:0,class:"q-mb-md"},eo=["src"],to={class:"text-body2 q-mb-md"},no={class:"q-mt-sm"},so={__name:"google",setup(ao){const d=D(),g=P(),k=Q(),c=S(()=>k.apiBase.value||"http://localhost:8080"),a=y(null),x=y("");C(async()=>{var f,n,r;console.log("ğŸ” Google page mounted"),console.log("ğŸŒ í˜„ì¬ API Base:",c),console.log("ğŸ”§ API Base íƒ€ì…:",typeof c),console.log("ğŸ”§ API Base ê°’:",c.value||c);try{const _=O(),s=await J(_);if(s){console.log("âœ… Google login result:",s),a.value={displayName:s.user.displayName,email:s.user.email,photoURL:s.user.photoURL,uid:s.user.uid},x.value=new Date().toLocaleString("ko-KR");const u=await s.user.getIdToken();try{const t=`${c.value}/auth/google`;console.log("ğŸŒ ë°±ì—”ë“œ API í˜¸ì¶œ ì‹œì‘:",t),console.log("ğŸ”§ ì‚¬ìš©í•  í† í°:",u.substring(0,20)+"...");const m=await T.post(t,null,{headers:{Authorization:`Bearer ${u}`},withCredentials:!0,timeout:1e4});console.log("âœ… ë°±ì—”ë“œ ì‘ë‹µ:",m.data),m.data.result===!0?(g.setLoggedIn(),console.log("âœ… ë¡œê·¸ì¸ ì„±ê³µ")):(console.error("âŒ ë°±ì—”ë“œ ì¸ì¦ ì‹¤íŒ¨"),g.setLoggedOut())}catch(t){console.error("âŒ ë°±ì—”ë“œ ìš”ì²­ ì‹¤íŒ¨:",t),console.error("âŒ ì—ëŸ¬ ìƒì„¸:",((f=t.response)==null?void 0:f.data)||t.message),console.error("âŒ ì—ëŸ¬ ì½”ë“œ:",(n=t.response)==null?void 0:n.status),console.error("âŒ ì—ëŸ¬ URL:",(r=t.config)==null?void 0:r.url),g.setLoggedOut()}}else console.log("âŒ Google login result not found"),d.push("/login")}catch(_){console.error("âŒ Google login error:",_),d.push("/login")}});const B=()=>{d.push("/dashboard")};return(f,n)=>{const r=z,_=V,s=E,u=Y,t=Z,m=X,N=M,L=K,w=G,I=W,R=H,U=F;return p(),q(U,null,{default:e(()=>[o(R,null,{default:e(()=>[o(I,{class:"flex flex-center"},{default:e(()=>[o(w,{style:{width:"400px"}},{default:e(()=>[o(_,{class:"text-center"},{default:e(()=>[o(r,{name:"check_circle",color:"green",size:"64px"}),n[0]||(n[0]=l("div",{class:"text-h5 q-mt-md"},"êµ¬ê¸€ ë¡œê·¸ì¸ ì„±ê³µ!",-1)),n[1]||(n[1]=l("div",{class:"text-body2 text-grey q-mt-sm"}," êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ",-1))]),_:1,__:[0,1]}),o(_,null,{default:e(()=>{var h,v;return[a.value?(p(),A("div",oo,[o(m,null,{default:e(()=>[o(u,{avatar:""},{default:e(()=>[o(s,null,{default:e(()=>[a.value.photoURL?(p(),A("img",{key:0,src:a.value.photoURL},null,8,eo)):(p(),q(r,{key:1,name:"person"}))]),_:1})]),_:1}),o(u,null,{default:e(()=>[o(t,{class:"text-weight-bold"},{default:e(()=>[b(i(a.value.displayName),1)]),_:1}),o(t,{caption:""},{default:e(()=>[b(i(a.value.email),1)]),_:1})]),_:1})]),_:1})])):$("",!0),l("div",to,[n[2]||(n[2]=l("strong",null,"ë¡œê·¸ì¸ ì •ë³´:",-1)),l("ul",no,[l("li",null,"ì´ë©”ì¼: "+i(((h=a.value)==null?void 0:h.email)||"N/A"),1),l("li",null,"ì´ë¦„: "+i(((v=a.value)==null?void 0:v.displayName)||"N/A"),1),l("li",null,"ë¡œê·¸ì¸ ì‹œê°„: "+i(x.value),1)])])]}),_:1}),o(L,{align:"center"},{default:e(()=>[o(N,{color:"primary",label:"ëŒ€ì‹œë³´ë“œë¡œ ì´ë™",onClick:B,class:"full-width"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},go=j(so,[["__scopeId","data-v-307cb35c"]]);export{go as default};
