import{r as d,bG as i,k as m,K as g}from"./zCgx7rFC.js";const b={apiBase:"http://localhost:9443",apiTimeout:5e3,enableDebug:!0,enableApiLogs:!0},C={apiBase:"https://stg-api.wevesoft.com",apiTimeout:1e4,enableDebug:!0,enableApiLogs:!0},$={apiBase:"https://dev.deallow.kr:9443",apiTimeout:15e3,enableDebug:!1,enableApiLogs:!0},r={development:b,staging:C,production:$},B=()=>{const o=d(null),s=d(!1),l=d(null),a=()=>{const e=window.location.hostname,t=window.location.port;return console.log("ðŸ” í™˜ê²½ ê°ì§€:",{hostname:e,port:t}),e==="localhost"||e==="127.0.0.1"||t==="3000"?(console.log("âœ… LOCAL í™˜ê²½ ê°ì§€ (localhost)"),"development"):e==="wevesoft.github.io"?(console.log("âœ… GITHUB PAGES í™˜ê²½ ê°ì§€ (wevesoft.github.io)"),"production"):e.includes("stg")||e.includes("staging")?(console.log("âœ… STAGING í™˜ê²½ ê°ì§€"),"staging"):(console.log("âœ… PRODUCTION í™˜ê²½ ê°ì§€"),"production")},u=()=>{var e;try{s.value=!0,l.value=null,console.log("ðŸš€ loadConfig ì‹œìž‘");const t=a();if(console.log("ðŸŒ í˜„ìž¬ í™˜ê²½:",t),console.log("ðŸ“„ config.json ì›ë³¸ ë°ì´í„°:",r),console.log("ðŸ“„ í™˜ê²½ë³„ ì„¤ì •:",{development:r.development,staging:r.staging,production:r.production}),o.value=r[t]||r.production,console.log("âš™ï¸ ë¡œë“œëœ ì„¤ì •:",o.value),console.log("âœ… config.value.apiBase:",(e=o.value)==null?void 0:e.apiBase),!o.value||!o.value.apiBase)throw new Error("config.jsonì—ì„œ ìœ íš¨í•œ ì„¤ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")}catch(t){l.value=t instanceof Error?t.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜",console.error("âŒ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:",t),console.error("âŒ ì—ëŸ¬ ìƒì„¸:",{message:t.message,stack:t.stack}),alert(`ì„¤ì • ë¡œë“œ ì‹¤íŒ¨: ${l.value}

íŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.`),o.value=null}finally{s.value=!1,console.log("ðŸ loadConfig ì™„ë£Œ - loading:",s.value,"config:",o.value)}},n=async(e,t={})=>{var f;if(o.value||u(),!o.value||!o.value.apiBase)throw new Error("API ì„¤ì •ì´ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");const v=`${o.value.apiBase}${e}`,h=o.value.apiTimeout;try{const c=new AbortController,w=setTimeout(()=>c.abort(),h),p=await fetch(v,{...t,signal:c.signal,credentials:"include",headers:{"Content-Type":"application/json",...t.headers}});if(clearTimeout(w),!p.ok)throw new Error(`HTTP ${p.status}: ${p.statusText}`);return await p.json()}catch(c){throw(f=o.value)!=null&&f.enableDebug&&console.error("âŒ API í˜¸ì¶œ ì‹¤íŒ¨:",c),c}};return console.log("ðŸš€ useConfig ì´ˆê¸°í™” - config.json ë¡œë”© ì‹œìž‘"),u(),{config:i(o),loading:i(s),error:i(l),loadConfig:u,apiCall:n,getEnvironment:a}},y=()=>{const{config:o,loading:s,error:l}=B(),a=m(()=>{var n;return s.value?(console.log("â³ config.json ë¡œë”© ì¤‘ - ê¸°ë³¸ê°’ ì‚¬ìš©"),"https://localhost:9443"):(n=o.value)!=null&&n.apiBase?(console.log("âœ… Config.jsonì—ì„œ API Base ì‚¬ìš©:",o.value.apiBase),o.value.apiBase):(console.log("ðŸ”„ ê¸°ë³¸ API Base ì‚¬ìš©: https://localhost:9443"),"https://localhost:9443")}),u={async get(n,e){const t=e?`?${new URLSearchParams(e).toString()}`:"";return(await g.get(`${a.value}${n}${t}`,{withCredentials:!0})).data},async post(n,e){return(await g.post(`${a.value}${n}`,e,{withCredentials:!0})).data},async put(n,e){return(await g.put(`${a.value}${n}`,e,{withCredentials:!0})).data},async delete(n){return(await g.delete(`${a.value}${n}`,{withCredentials:!0})).data},async upload(n,e){return(await g.post(`${a.value}${n}`,e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}};return{config:i(o),loading:i(s),error:i(l),apiBase:a,api:u,debug:()=>{console.log("ðŸ”§ API ì„¤ì • ì •ë³´:",{apiBase:a.value,environment:o.value,loading:s.value,error:l.value})}}};export{y as u};
