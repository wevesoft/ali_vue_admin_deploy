import{r as d,bG as i,k as m,K as g}from"./zCgx7rFC.js";const b={apiBase:"http://localhost:9443",apiTimeout:5e3,enableDebug:!0,enableApiLogs:!0},C={apiBase:"https://stg-api.wevesoft.com",apiTimeout:1e4,enableDebug:!0,enableApiLogs:!0},$={apiBase:"https://dev.deallow.kr:9443",apiTimeout:15e3,enableDebug:!1,enableApiLogs:!0},r={development:b,staging:C,production:$},B=()=>{const o=d(null),s=d(!1),l=d(null),a=()=>{const e=window.location.hostname,t=window.location.port;return console.log("🔍 환경 감지:",{hostname:e,port:t}),e==="localhost"||e==="127.0.0.1"||t==="3000"?(console.log("✅ LOCAL 환경 감지 (localhost)"),"development"):e==="wevesoft.github.io"?(console.log("✅ GITHUB PAGES 환경 감지 (wevesoft.github.io)"),"production"):e.includes("stg")||e.includes("staging")?(console.log("✅ STAGING 환경 감지"),"staging"):(console.log("✅ PRODUCTION 환경 감지"),"production")},u=()=>{var e;try{s.value=!0,l.value=null,console.log("🚀 loadConfig 시작");const t=a();if(console.log("🌍 현재 환경:",t),console.log("📄 config.json 원본 데이터:",r),console.log("📄 환경별 설정:",{development:r.development,staging:r.staging,production:r.production}),o.value=r[t]||r.production,console.log("⚙️ 로드된 설정:",o.value),console.log("✅ config.value.apiBase:",(e=o.value)==null?void 0:e.apiBase),!o.value||!o.value.apiBase)throw new Error("config.json에서 유효한 설정을 찾을 수 없습니다.")}catch(t){l.value=t instanceof Error?t.message:"알 수 없는 오류",console.error("❌ 설정 로드 실패:",t),console.error("❌ 에러 상세:",{message:t.message,stack:t.stack}),alert(`설정 로드 실패: ${l.value}

페이지를 새로고침해주세요.`),o.value=null}finally{s.value=!1,console.log("🏁 loadConfig 완료 - loading:",s.value,"config:",o.value)}},n=async(e,t={})=>{var f;if(o.value||u(),!o.value||!o.value.apiBase)throw new Error("API 설정이 로드되지 않았습니다.");const v=`${o.value.apiBase}${e}`,h=o.value.apiTimeout;try{const c=new AbortController,w=setTimeout(()=>c.abort(),h),p=await fetch(v,{...t,signal:c.signal,credentials:"include",headers:{"Content-Type":"application/json",...t.headers}});if(clearTimeout(w),!p.ok)throw new Error(`HTTP ${p.status}: ${p.statusText}`);return await p.json()}catch(c){throw(f=o.value)!=null&&f.enableDebug&&console.error("❌ API 호출 실패:",c),c}};return console.log("🚀 useConfig 초기화 - config.json 로딩 시작"),u(),{config:i(o),loading:i(s),error:i(l),loadConfig:u,apiCall:n,getEnvironment:a}},y=()=>{const{config:o,loading:s,error:l}=B(),a=m(()=>{var n;return s.value?(console.log("⏳ config.json 로딩 중 - 기본값 사용"),"https://localhost:9443"):(n=o.value)!=null&&n.apiBase?(console.log("✅ Config.json에서 API Base 사용:",o.value.apiBase),o.value.apiBase):(console.log("🔄 기본 API Base 사용: https://localhost:9443"),"https://localhost:9443")}),u={async get(n,e){const t=e?`?${new URLSearchParams(e).toString()}`:"";return(await g.get(`${a.value}${n}${t}`,{withCredentials:!0})).data},async post(n,e){return(await g.post(`${a.value}${n}`,e,{withCredentials:!0})).data},async put(n,e){return(await g.put(`${a.value}${n}`,e,{withCredentials:!0})).data},async delete(n){return(await g.delete(`${a.value}${n}`,{withCredentials:!0})).data},async upload(n,e){return(await g.post(`${a.value}${n}`,e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}};return{config:i(o),loading:i(s),error:i(l),apiBase:a,api:u,debug:()=>{console.log("🔧 API 설정 정보:",{apiBase:a.value,environment:o.value,loading:s.value,error:l.value})}}};export{y as u};
