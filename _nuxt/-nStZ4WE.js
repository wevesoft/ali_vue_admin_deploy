import{r as f,bG as h,k as d}from"./p4mhUUde.js";const v=()=>{const e=f(null),r=f(!0),c=f(null),s=()=>{{const t=window.location.hostname,a=window.location.port,l=window.location.href;return console.log("🔍 환경 감지:",{hostname:t,port:a,fullUrl:l}),t==="localhost"||t==="127.0.0.1"||a==="3000"?(console.log("✅ LOCAL 환경 감지 (localhost)"),"development"):t==="wevesoft.github.io"?(console.log("✅ GITHUB PAGES 환경 감지 (wevesoft.github.io)"),"production"):t.includes("stg")||t.includes("staging")?(console.log("✅ STAGING 환경 감지"),"staging"):(console.log("✅ PRODUCTION 환경 감지"),"production")}},u=async()=>{try{r.value=!0,c.value=null;const t=s();console.log("🌍 현재 환경:",t);let a="/config.json";if(window.location.hostname==="wevesoft.github.io"){const i=window.location.pathname.split("/").filter(g=>g)[0]||"";a=i?`/${i}/config.json`:"/config.json",console.log("📁 GitHub Pages config.json 경로:",a)}const l=await fetch(a);if(!l.ok)throw new Error(`설정 파일을 로드할 수 없습니다. (${l.status})`);const p=await l.json();e.value=p[t]||p.production,console.log("⚙️ 로드된 설정:",e.value)}catch(t){c.value=t instanceof Error?t.message:"알 수 없는 오류",console.error("❌ 설정 로드 실패:",t),s()==="development"?e.value={apiBase:"https://localhost:9443",apiTimeout:5e3,enableDebug:!0}:e.value={apiBase:"https://dev.deallow.kr:9443",apiTimeout:15e3,enableDebug:!1}}finally{r.value=!1}},w=async(t,a={})=>{var n;e.value||await u();const l=`${e.value.apiBase}${t}`,p=e.value.apiTimeout;try{const o=new AbortController,i=setTimeout(()=>o.abort(),p),g=await fetch(l,{...a,signal:o.signal,headers:{"Content-Type":"application/json",...a.headers}});if(clearTimeout(i),!g.ok)throw new Error(`HTTP ${g.status}: ${g.statusText}`);return await g.json()}catch(o){throw(n=e.value)!=null&&n.enableDebug&&console.error("❌ API 호출 실패:",o),o}};return u(),{config:h(e),loading:h(r),error:h(c),loadConfig:u,apiCall:w,getEnvironment:s}},b=()=>{const{config:e,loading:r,error:c,apiCall:s}=v(),u=d(()=>{var n,o,i;return(n=e.value)!=null&&n.apiBase?(console.log("✅ Config.json에서 API Base 사용:",e.value.apiBase),e.value.apiBase):(console.log("🔧 API Base 설정:",{hostname:window.location.hostname,port:window.location.port,isLocalhost:window.location.hostname==="localhost"||window.location.port==="3000"}),window.location.hostname==="localhost"||window.location.port==="3000"?(console.log("✅ Localhost API 사용: http://localhost:8081"),"http://localhost:8081"):(console.log("🌐 Remote API 사용:",((o=e.value)==null?void 0:o.apiBase)||"http://dev.deallow.kr:8080"),((i=e.value)==null?void 0:i.apiBase)||"http://dev.deallow.kr:8080"))}),w=d(()=>"http://localhost:8080"),t=d(()=>"https://dev-api.wevesoft.com"),a=d(()=>"https://stg-api.wevesoft.com"),l=d(()=>"https://api.wevesoft.com"),p={async get(n,o){const i=o?`?${new URLSearchParams(o).toString()}`:"";return await s(`${n}${i}`,{method:"GET"})},async post(n,o){return await s(n,{method:"POST",body:o?JSON.stringify(o):void 0})},async put(n,o){return await s(n,{method:"PUT",body:o?JSON.stringify(o):void 0})},async delete(n){return await s(n,{method:"DELETE"})},async upload(n,o){return await s(n,{method:"POST",body:o,headers:{}})}};return{config:h(e),loading:h(r),error:h(c),apiBase:u,apiBaseLocal:w,apiBaseDev:t,apiBaseStg:a,apiBasePrd:l,api:p,debug:()=>{console.log("🔧 API 설정 정보:",{apiBase:u.value,environment:e.value,loading:r.value,error:c.value})}}};export{b as u};
