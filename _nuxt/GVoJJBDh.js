import{u as Oe}from"./B8d0cOIl.js";import{_ as De}from"./DlAUqK2U.js";import{V as fe,$ as ge,ap as Ae,aq as Ee,ar as Le,X as pe,r as A,k as y,as as Be,at as Me,a0 as Re,au as $e,av as je,a6 as de,e as ye,aw as be,ax as _e,ay as Fe,h as Q,a1 as He,Z as ve,az as ze,aA as We,W as Ke,Y as Qe,aB as he,aC as Ge,aD as Ie,O as Ce,Q as Se,aE as Ye,aF as Xe,aG as Ze,L as se,C as r,aa as Je,y as te,z as u,B as i,A as p,D as K,al as et,_ as tt,N as ot,x as we,T as le,aH as ae,aI as lt,P as at,S as nt,a9 as it}from"./4dOPgbBj.js";import{_ as rt}from"./BjjNnFPt.js";import{v as st,a as xe,u as ut,p as Pe,b as dt,c as ct,d as mt,r as qe,s as gt,_ as vt}from"./CP9oHIhn.js";import{_ as ft}from"./CiZ8Pkwq.js";import{b as pt}from"./CoaQEihs.js";import{c as ke}from"./Dafnpy04.js";import{_ as yt}from"./D07MN2ue.js";import"./Dw_vXj8B.js";import"./BJTHMjyR.js";import"./CF60rNa8.js";const bt=fe({name:"QTooltip",inheritAttrs:!1,props:{...ut,...Le,...ge,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...ge.transitionShow,default:"jump-down"},transitionHide:{...ge.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:xe},self:{type:String,default:"top middle",validator:xe},offset:{type:Array,default:()=>[14,14],validator:st},scrollTarget:Ee,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Ae],setup(e,{slots:g,emit:_,attrs:h}){let x,v;const f=pe(),{proxy:{$q:U}}=f,E=A(null),L=A(!1),s=y(()=>Pe(e.anchor,U.lang.rtl)),a=y(()=>Pe(e.self,U.lang.rtl)),P=y(()=>e.persistent!==!0),{registerTick:k,removeTick:b}=Be(),{registerTimeout:B}=Me(),{transitionProps:q,transitionStyle:C}=Re(e),{localScrollTarget:M,changeScrollEvent:X,unconfigureScrollTarget:G}=dt(e,o),{anchorEl:N,canShow:oe,anchorEvents:F}=ct({showing:L,configureAnchorEl:T}),{show:H,hide:Y}=$e({showing:L,canShow:oe,handleShow:c,handleHide:m,hideOnRouteChange:P,processOnMount:!0});Object.assign(F,{delayShow:ee,delayHide:z});const{showPortal:Z,hidePortal:J,renderPortal:O}=je(f,E,d,"tooltip");if(U.platform.is.mobile===!0){const l={anchorEl:N,innerRef:E,onClickOutside(D){return Y(D),D.target.classList.contains("q-dialog__backdrop")&&ze(D),!0}},w=y(()=>e.modelValue===null&&e.persistent!==!0&&L.value===!0);de(w,D=>{(D===!0?mt:qe)(l)}),ye(()=>{qe(l)})}function c(l){Z(),k(()=>{v=new MutationObserver(()=>S()),v.observe(E.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),S(),o()}),x===void 0&&(x=de(()=>U.screen.width+"|"+U.screen.height+"|"+e.self+"|"+e.anchor+"|"+U.lang.rtl,S)),B(()=>{Z(!0),_("show",l)},e.transitionDuration)}function m(l){b(),J(),$(),B(()=>{J(!0),_("hide",l)},e.transitionDuration)}function $(){v!==void 0&&(v.disconnect(),v=void 0),x!==void 0&&(x(),x=void 0),G(),be(F,"tooltipTemp")}function S(){gt({targetEl:E.value,offset:e.offset,anchorEl:N.value,anchorOrigin:s.value,selfOrigin:a.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ee(l){if(U.platform.is.mobile===!0){ke(),document.body.classList.add("non-selectable");const w=N.value,D=["touchmove","touchcancel","touchend","click"].map(I=>[w,I,"delayHide","passiveCapture"]);_e(F,"tooltipTemp",D)}B(()=>{H(l)},e.delay)}function z(l){U.platform.is.mobile===!0&&(be(F,"tooltipTemp"),ke(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),B(()=>{Y(l)},e.hideDelay)}function T(){if(e.noParentEvent===!0||N.value===null)return;const l=U.platform.is.mobile===!0?[[N.value,"touchstart","delayShow","passive"]]:[[N.value,"mouseenter","delayShow","passive"],[N.value,"mouseleave","delayHide","passive"]];_e(F,"anchor",l)}function o(){if(N.value!==null||e.scrollTarget!==void 0){M.value=Fe(N.value,e.scrollTarget);const l=e.noParentEvent===!0?S:Y;X(M.value,l)}}function t(){return L.value===!0?Q("div",{...h,ref:E,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",h.class],style:[h.style,C.value],role:"tooltip"},ve(g.default)):null}function d(){return Q(He,q.value,t)}return ye($),Object.assign(f.proxy,{updatePosition:S}),O}});function ue(e,g){return[!0,!1].includes(e)?e:g}const _t=fe({name:"QPagination",props:{...Ke,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||We.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:g}){const{proxy:_}=pe(),{$q:h}=_,x=Qe(e,h),v=y(()=>parseInt(e.min,10)),f=y(()=>parseInt(e.max,10)),U=y(()=>parseInt(e.maxPages,10)),E=y(()=>b.value+" / "+f.value),L=y(()=>ue(e.boundaryLinks,e.input)),s=y(()=>ue(e.boundaryNumbers,!e.input)),a=y(()=>ue(e.directionLinks,e.input)),P=y(()=>ue(e.ellipses,!e.input)),k=A(null),b=y({get:()=>e.modelValue,set:c=>{if(c=parseInt(c,10),e.disable||isNaN(c))return;const m=pt(c,v.value,f.value);e.modelValue!==m&&g("update:modelValue",m)}});de(()=>`${v.value}|${f.value}`,()=>{b.value=e.modelValue});const B=y(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),q=y(()=>e.gutter in he?`${he[e.gutter]}px`:e.gutter||null),C=y(()=>q.value!==null?`--q-pagination-gutter-parent:-${q.value};--q-pagination-gutter-child:${q.value}`:null),M=y(()=>{const c=[e.iconFirst||h.iconSet.pagination.first,e.iconPrev||h.iconSet.pagination.prev,e.iconNext||h.iconSet.pagination.next,e.iconLast||h.iconSet.pagination.last];return h.lang.rtl===!0?c.reverse():c}),X=y(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),G=y(()=>Ge(e,"flat")),N=y(()=>({[G.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),oe=y(()=>{const c={[G.value]:!1};return e.activeDesign!==""&&(c[e.activeDesign]=!0),c}),F=y(()=>({...oe.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),H=y(()=>{let c=Math.max(U.value,1+(P.value?2:0)+(s.value?2:0));const m={pgFrom:v.value,pgTo:f.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(f.value).length)}em`}};return U.value&&c<f.value-v.value+1&&(c=1+Math.floor(c/2)*2,m.pgFrom=Math.max(v.value,Math.min(f.value-c+1,e.modelValue-Math.floor(c/2))),m.pgTo=Math.min(f.value,m.pgFrom+c-1),s.value&&(m.boundaryStart=!0,m.pgFrom++),P.value&&m.pgFrom>v.value+(s.value?1:0)&&(m.ellipsesStart=!0,m.pgFrom++),s.value&&(m.boundaryEnd=!0,m.pgTo--),P.value&&m.pgTo<f.value-(s.value?1:0)&&(m.ellipsesEnd=!0,m.pgTo--)),m});function Y(c){b.value=c}function Z(c){b.value=b.value+c}const J=y(()=>{function c(){b.value=k.value,k.value=null}return{"onUpdate:modelValue":m=>{k.value=m},onKeyup:m=>{Ie(m,13)===!0&&c()},onBlur:c}});function O(c,m,$){const S={"aria-label":m,"aria-current":"false",...N.value,...c};return $===!0&&Object.assign(S,{"aria-current":"true",...F.value}),m!==void 0&&(e.toFn!==void 0?S.to=e.toFn(m):S.onClick=()=>{Y(m)}),Q(Se,S)}return Object.assign(_,{set:Y,setByOffset:Z}),()=>{const c=[],m=[];let $;if(L.value===!0&&(c.push(O({key:"bls",disable:e.disable||e.modelValue<=v.value,icon:M.value[0],"aria-label":h.lang.pagination.first},v.value)),m.unshift(O({key:"ble",disable:e.disable||e.modelValue>=f.value,icon:M.value[3],"aria-label":h.lang.pagination.last},f.value))),a.value===!0&&(c.push(O({key:"bdp",disable:e.disable||e.modelValue<=v.value,icon:M.value[1],"aria-label":h.lang.pagination.prev},e.modelValue-1)),m.unshift(O({key:"bdn",disable:e.disable||e.modelValue>=f.value,icon:M.value[2],"aria-label":h.lang.pagination.next},e.modelValue+1))),e.input!==!0){$=[];const{pgFrom:S,pgTo:ee,marginalStyle:z}=H.value;if(H.value.boundaryStart===!0){const T=v.value===e.modelValue;c.push(O({key:"bns",style:z,disable:e.disable,label:v.value},v.value,T))}if(H.value.boundaryEnd===!0){const T=f.value===e.modelValue;m.unshift(O({key:"bne",style:z,disable:e.disable,label:f.value},f.value,T))}H.value.ellipsesStart===!0&&c.push(O({key:"bes",style:z,disable:e.disable,label:"…",ripple:!1},S-1)),H.value.ellipsesEnd===!0&&m.unshift(O({key:"bee",style:z,disable:e.disable,label:"…",ripple:!1},ee+1));for(let T=S;T<=ee;T++)$.push(O({key:`bpg${T}`,style:z,disable:e.disable,label:T},T,T===e.modelValue))}return Q("div",{class:B.value,...X.value},[Q("div",{class:"q-pagination__content row no-wrap items-center",style:C.value},[...c,e.input===!0?Q(Ce,{class:"inline",style:{width:`${E.value.length/1.5}em`},type:"number",dense:!0,value:k.value,disable:e.disable,dark:x.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:E.value,min:v.value,max:f.value,...J.value}):Q("div",{class:"q-pagination__middle row justify-center"},$),...m])])}}}),ht=fe({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:g}){const _=pe(),h=y(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return Q("td",{class:h.value},ve(g.default));const x=_.vnode.key,v=(e.props.colsMap!==void 0?e.props.colsMap[x]:null)||e.props.col;if(v===void 0)return;const{row:f}=e.props;return Q("td",{class:h.value+v.__tdClass(f),style:v.__tdStyle(f)},ve(g.default))}}});function Ve(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const g=parseInt(e,10);return isNaN(g)?0:g}const wt=Ye({name:"close-popup",beforeMount(e,{value:g}){const _={depth:Ve(g),handler(h){_.depth!==0&&setTimeout(()=>{const x=Xe(e);x!==void 0&&Ze(x,h,_.depth)})},handlerKey(h){Ie(h,13)===!0&&_.handler(h)}};e.__qclosepopup=_,e.addEventListener("click",_.handler),e.addEventListener("keyup",_.handlerKey)},updated(e,{value:g,oldValue:_}){g!==_&&(e.__qclosepopup.depth=Ve(g))},beforeUnmount(e){const g=e.__qclosepopup;e.removeEventListener("click",g.handler),e.removeEventListener("keyup",g.handlerKey),delete e.__qclosepopup}}),xt={class:"q-mb-md row items-center justify-between"},Pt={class:"row items-center"},qt={style:{cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"120px",display:"inline-block"}},kt={style:{cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"120px",display:"inline-block"}},Vt={style:{cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"90px",display:"inline-block"}},It={style:{cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"180px",display:"inline-block"}},Ct=["href"],St=["href"],Ut=["src"],Tt=["src"],Nt={class:"row items-center justify-between q-pa-md"},Ot={class:"col-auto"},Dt={class:"col-auto"},At={class:"col-auto text-caption text-grey-6"},Et={class:"text-h6"},Lt={key:0},Bt={class:"row q-gutter-md items-center q-mb-md"},Mt={class:"col-auto"},Rt=["src"],$t=["src"],jt={class:"text-subtitle1"},Ft={class:"text-h6 text-negative"},Ht={class:"row q-gutter-md"},zt={class:"col-3"},Wt=["src"],Kt={class:"col-9"},Qt={class:"row q-gutter-y-sm"},Gt={class:"col-12"},Yt={class:"text-weight-bold text-h6"},Xt={class:"col-6"},Zt={class:"text-body2"},Jt={class:"col-6"},eo={class:"text-body2"},to={class:"col-12"},oo={class:"text-body2 text-weight-bold text-primary"},lo={class:"col-12"},ao={class:"text-body2",style:{"max-height":"60px",overflow:"hidden","text-overflow":"ellipsis"}},no={class:"col-12"},io={class:"text-body2",style:{"max-height":"60px",overflow:"hidden","text-overflow":"ellipsis"}},ro=["href"],so={class:"text-weight-bold text-h6 q-mb-sm"},uo={class:"text-caption text-grey-6"},co={class:"text-caption text-grey-6"},mo={class:"text-caption text-grey-6"},go={__name:"recommend-products",setup(e){const g=A([{label:"전체",value:"전체",categoryId:0,order:0}]),_=A("전체"),h=[{name:"num",label:"번호",field:o=>"",align:"center",sortable:!1,style:"min-width:60px;"},{name:"category",label:"카테고리",field:"category",align:"center",sortable:!0,style:"min-width:100px;"},{name:"aliProductId",label:"Ali 상품 ID",field:"aliProductId",align:"center",sortable:!0,style:"min-width:120px;"},{name:"name",label:"상품 이름",field:"name",align:"center",sortable:!0,style:"min-width:120px;"},{name:"code",label:"상품 번호",field:"code",align:"center",sortable:!0,style:"min-width:90px;"},{name:"desc",label:"상품 설명",field:"desc",align:"center",style:"min-width:180px;"},{name:"url",label:"상품 URL",field:"url",align:"center",style:"min-width:180px;"},{name:"promotionUrl",label:"프로모션 URL",field:"promotionUrl",align:"center",style:"min-width:180px;"},{name:"image",label:"상품 이미지",field:"image",align:"center",style:"min-width:70px;"},{name:"price",label:"가격",field:"price",align:"center",sortable:!0,style:"min-width:80px;"},{name:"actions",label:"관리",field:"actions",align:"center"}];async function x(){var o,t,d;console.log("🔍 fetchProducts 시작"),console.log("🔍 현재 환경:",{processClient:!0,nodeEnv:"production",hostname:window.location.hostname});try{const l=g.value.find(V=>V.value===_.value),D={categoryId:l?l.categoryId:0,limit:s.value.rowsPerPage,offset:(s.value.page-1)*s.value.rowsPerPage};console.log("🔍 페이징 정보:",{page:s.value.page,rowsPerPage:s.value.rowsPerPage,offset:D.offset,totalRows:s.value.rowsNumber}),console.log("🔍 config 설정:",C.config.value),M("상품 목록 요청",{method:"POST",payload:D});const I=await C.api.post("/recommended/product/list",D);X("상품 목록 응답",I),Array.isArray(I)?(console.log("Fetched products:",I),f.value=I.map(V=>{console.log("🔍 Product Category Mapping:",{productCategoryId:V.categoryId,productCategoryIdType:typeof V.categoryId,convertedCategoryId:Number(V.categoryId),availableCategories:g.value.map(j=>({categoryId:j.categoryId,categoryIdType:typeof j.categoryId,label:j.label}))});const ce=Number(V.categoryId),R=g.value.find(j=>j.categoryId===ce),W=R?R.label:"기타";return console.log("📋 Category Mapping Result:",{productCategoryId:V.categoryId,convertedCategoryId:Number(V.categoryId),foundCategoryOption:R,finalCategoryLabel:W}),{seq:V.seq,category:W,aliProductId:V.aliProductId||"",name:V.productName,code:V.productId,desc:V.productDesc,url:V.productUrl,promotionUrl:V.promotionUrl,image:V.imageUrl,price:`${V.price.toLocaleString()}원`}})):(console.error("Invalid response format:",I),f.value=[])}catch(l){G("상품 목록 요청 실패",l),console.error("🔍 상세 에러 정보:",{message:l.message,status:(o=l.response)==null?void 0:o.status,statusText:(t=l.response)==null?void 0:t.statusText,data:(d=l.response)==null?void 0:d.data}),q.notify({type:"negative",message:"상품 목록을 불러오는데 실패했습니다."}),f.value=[]}}async function v(){try{const o=g.value.find(w=>w.value===_.value),d={categoryId:o?o.categoryId:0};M("상품 수 요청",{method:"POST",payload:d});const l=await C.api.post("/recommended/product/count",d);if(X("상품 수 응답",l),l&&typeof l.count=="number"){console.log("Total product count:",l.count),s.value.rowsNumber=l.count;const w=Math.ceil(l.count/s.value.rowsPerPage);s.value.page>w&&w>0&&(s.value.page=w),console.log("📊 페이징 정보 업데이트:",{totalCount:l.count,currentPage:s.value.page,maxPage:w,rowsPerPage:s.value.rowsPerPage,computedMaxPage:w.value,currentPageRange:L.value})}else console.error("Invalid count response format:",l),s.value.rowsNumber=0}catch(o){G("상품 수 요청 실패",o),console.error("🔍 상품 수 요청 에러:",o),s.value.rowsNumber=0}}const f=A([]),U=y(()=>_.value==="전체"?f.value:f.value.filter(o=>o.category===_.value)),E=y(()=>s.value.rowsNumber===0?1:Math.ceil(s.value.rowsNumber/s.value.rowsPerPage)),L=y(()=>{const o=(s.value.page-1)*s.value.rowsPerPage+1,t=Math.min(s.value.page*s.value.rowsPerPage,s.value.rowsNumber);return{start:o,end:t}}),s=A({page:1,rowsPerPage:20,rowsNumber:0}),a=A({visible:!1,mode:"add",form:{seq:null,name:"",code:"",desc:"",url:"",image:"",price:"",affiliateUrl:""},infoVisible:!1}),P=A({visible:!1,row:null}),k=A({visible:!1,mode:"add"}),b=A({visible:!1,row:null}),B=A(!1),q=Je(),C=Oe(),M=(o,t)=>{var d;(d=C.config.value)!=null&&d.enableApiLogs&&console.log(`📡 ${o}:`,t)},X=(o,t)=>{var d;(d=C.config.value)!=null&&d.enableApiLogs&&console.log(`📡 ${o}:`,t)},G=(o,t)=>{var d;(d=C.config.value)!=null&&d.enableApiLogs&&console.error(`❌ ${o}:`,t)};async function N(){try{M("카테고리 요청",{method:"POST"});const o=await C.api.post("/recommended/category/list",{});X("카테고리 응답",o),Array.isArray(o)&&(console.log("📂 Fetched Categories:",o),g.value=[{label:"전체",value:"전체",categoryId:0,order:0},...o.map(t=>({label:t.categoryName,value:t.categoryName,categoryId:Number(t.categoryId),order:t.order}))],console.log("✅ Final CATEGORY_OPTIONS:",g.value))}catch(o){G("카테고리 요청 실패",o)}}N(),x(),v();function oe(o){console.log("🔄 페이지 변경:",{oldPage:s.value.page,newPage:o,rowsPerPage:s.value.rowsPerPage,totalRows:s.value.rowsNumber,maxPage:E.value,currentPageRange:L.value}),s.value.page=o,x()}function F(o){console.log("🔄 페이지당 행 수 변경:",{oldRowsPerPage:s.value.rowsPerPage,newRowsPerPage:o,oldPage:s.value.page,totalRows:s.value.rowsNumber}),s.value.rowsPerPage=o,s.value.page=1,console.log("🔄 변경 후 페이징 정보:",{page:s.value.page,rowsPerPage:s.value.rowsPerPage,maxPage:E.value,currentPageRange:L.value}),x(),v()}function H(o){const{page:t,rowsPerPage:d}=o.pagination;s.value.page=t,s.value.rowsPerPage=d,x(),v()}de([_],()=>{s.value.page=1,x(),v()});function Y(){if(!a.value.form.url){q.notify({type:"warning",message:"상품 URL을 입력하세요."});return}const o=g.value.find(d=>d.value===a.value.form.category),t=o?o.categoryId:0;C.api.post("/recommended/get/product/detail",{categoryName:a.value.form.category,categoryId:t,productUrl:a.value.form.url,productName:a.value.form.name}).then(d=>{if(console.log(d),d&&d.result===!0){const l=d;a.value.form.image=l.productMainImageUrl,a.value.form.code=l.productId,a.value.form.desc=l.productTitle,a.value.form.price=l.targetSalePrice,a.value.form.affiliateUrl=l.promotionLink,a.value.infoVisible=!0}else q.dialog({title:"알림",message:"상품 정보가 없습니다.",ok:"확인",color:"negative"}),a.value.infoVisible=!1}).catch(()=>{q.dialog({title:"알림",message:"상품 정보가 없습니다.",ok:"확인",color:"negative"}),a.value.infoVisible=!1})}function Z(){if(a.value.mode==="add"){if(!a.value.infoVisible){q.notify({type:"warning",message:"상품 정보를 가져오세요."});return}k.value={visible:!0,mode:"add"}}else{if(!a.value.infoVisible){q.notify({type:"warning",message:"상품 정보를 가져오세요."});return}k.value={visible:!0,mode:"edit"}}}function J(){const o=g.value.find(l=>l.value===a.value.form.category),t=o?o.categoryId:0,d={categoryName:a.value.form.category,categoryId:t,productName:a.value.form.name||`상품${f.value.length+1}`,productId:a.value.form.code,productdesc:a.value.form.desc,productUrl:a.value.form.url,imageUrl:a.value.form.image,price:a.value.form.price,affiliateUrl:a.value.form.affiliateUrl};C.api.post("/recommended/add/product",d).then(l=>{console.log("Add product response:",l),l&&l.result===!0?(q.notify({type:"positive",message:"상품이 추가되었습니다."}),a.value.visible=!1,k.value.visible=!1,v(),x()):q.notify({type:"negative",message:"상품 추가에 실패했습니다."})}).catch(l=>{console.error("Add product error:",l),q.notify({type:"negative",message:"상품 추가에 실패했습니다."})})}function O(){console.log("🔧 Confirm Action:",k.value.mode),k.value.mode==="add"?J():k.value.mode==="edit"&&c()}function c(){console.log("🔧 Modify Product Called"),console.log("📋 Dialog Form:",a.value.form);const o=g.value.find(l=>l.value===a.value.form.category),t=o?o.categoryId:0,d={categoryName:a.value.form.category,categoryId:t,productName:a.value.form.name||`상품${f.value.length+1}`,productId:a.value.form.code,productdesc:a.value.form.desc,productUrl:a.value.form.url,imageUrl:a.value.form.image,price:a.value.form.price,affiliateUrl:a.value.form.affiliateUrl};console.log("🚀 Sending Modify Request:",d),C.api.post("/recommended/modify/product",d).then(l=>{console.log("Modify product response:",l),l&&l.result===!0?(q.notify({type:"positive",message:"상품이 수정되었습니다."}),a.value.visible=!1,k.value.visible=!1,v(),x()):q.notify({type:"negative",message:"상품 수정에 실패했습니다."})}).catch(l=>{console.error("Modify product error:",l),q.notify({type:"negative",message:"상품 수정에 실패했습니다."})})}function m(){a.value={visible:!0,mode:"add",form:{seq:null,name:"",code:"",desc:"",url:"",image:"",price:"",affiliateUrl:""},infoVisible:!1},k.value={visible:!1,mode:"add"}}function $(o){a.value={visible:!0,mode:"edit",form:{seq:o.seq,category:o.category,name:o.name,code:o.code,desc:o.desc,url:o.url,image:o.image,price:o.price,affiliateUrl:o.promotionUrl||o.affiliateUrl||""},infoVisible:!0},k.value={visible:!1,mode:"edit"}}function S(o){P.value={visible:!0,row:o},b.value={visible:!1,row:null}}function ee(){P.value.row&&(P.value.visible=!1,it(()=>{b.value={visible:!0,row:P.value.row}}))}function z(o){console.log("🔍 Getting categoryId for:",o),console.log("📋 Available categories:",g.value);const t=g.value.find(l=>l.label===o),d=t?t.categoryId:0;return console.log("✅ Found categoryId:",d,"for category:",o),d}async function T(){if(b.value.row){B.value=!0;try{console.log("🗑️ Executing Delete Product:",b.value.row);const o=await C.api.post("/recommended/remove/product",{productId:b.value.row.code,productName:b.value.row.name,aliProductId:b.value.row.aliProductId,categoryId:z(b.value.row.category)});console.log("🗑️ Delete Response:",o.data),o&&o.result===!0?(b.value={visible:!1,row:null},q.dialog({title:"성공",message:"상품이 성공적으로 삭제되었습니다.",ok:"확인",color:"positive"}),v(),x()):q.dialog({title:"실패",message:"상품 삭제에 실패했습니다.",ok:"확인",color:"negative"})}catch(o){console.error("Delete product error:",o),q.dialog({title:"오류",message:"상품 삭제 중 오류가 발생했습니다.",ok:"확인",color:"negative"})}finally{B.value=!1}}}return A({seq:60,name:120,code:90,desc:180,url:180,image:70,price:80,actions:100}),(o,t)=>{const d=vt,l=Se,w=ht,D=yt,I=bt,V=_t,ce=ft,R=ot,W=Ce,j=at,ne=tt,ie=et,me=nt,Ue=rt,Te=lt,re=wt;return te(),se(Ue,{padding:""},{default:r(()=>[u("div",xt,[u("div",Pt,[i(d,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=n=>_.value=n),options:g.value,label:"카테고리",dense:"",outlined:"",style:{width:"160px","min-width":"120px","margin-right":"12px"},"emit-value":"","map-options":""},null,8,["modelValue","options"]),i(l,{color:"primary",label:"상품 추가",onClick:m,class:"q-ml-sm",unelevated:"",rounded:"",icon:"add"})])]),i(ce,{rows:U.value,columns:h,"row-key":"code",flat:"",bordered:"",class:"q-mb-md shadow-1 resizable-table","table-col-resize":!0,pagination:s.value,"rows-per-page-options":[10,20,50,100],"rows-per-page-label":"페이지당 행 수","no-data-label":"데이터가 없습니다","loading-label":"로딩 중...","no-results-label":"검색 결과가 없습니다",onRequest:H},{"body-cell-num":r(n=>[i(w,{align:"center"},{default:r(()=>[K(p(n.rowIndex+1),1)]),_:2},1024)]),"body-cell-category":r(n=>[i(w,{align:"center"},{default:r(()=>[i(D,{color:"primary",outline:""},{default:r(()=>[K(p(n.row.category),1)]),_:2},1024)]),_:2},1024)]),"body-cell-aliProductId":r(n=>[i(w,{align:"center"},{default:r(()=>[i(I,null,{default:r(()=>[K(p(n.row.aliProductId),1)]),_:2},1024),u("span",qt,p(n.row.aliProductId),1)]),_:2},1024)]),"body-cell-name":r(n=>[i(w,{align:"center"},{default:r(()=>[i(I,null,{default:r(()=>[K(p(n.row.name),1)]),_:2},1024),u("span",kt,p(n.row.name),1)]),_:2},1024)]),"body-cell-code":r(n=>[i(w,{align:"center"},{default:r(()=>[i(I,null,{default:r(()=>[K(p(n.row.code),1)]),_:2},1024),u("span",Vt,p(n.row.code),1)]),_:2},1024)]),"body-cell-desc":r(n=>[i(w,{align:"center"},{default:r(()=>[i(I,null,{default:r(()=>[K(p(n.row.desc),1)]),_:2},1024),u("span",It,p(n.row.desc),1)]),_:2},1024)]),"body-cell-url":r(n=>[i(w,{align:"center"},{default:r(()=>[i(I,null,{default:r(()=>[K(p(n.row.url),1)]),_:2},1024),u("a",{href:n.row.url,target:"_blank",style:{color:"#1976d2","text-decoration":"underline",cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"180px",display:"inline-block"}},p(n.row.url),9,Ct)]),_:2},1024)]),"body-cell-promotionUrl":r(n=>[i(w,{align:"center"},{default:r(()=>[i(I,null,{default:r(()=>[K(p(n.row.promotionUrl),1)]),_:2},1024),u("a",{href:n.row.promotionUrl,target:"_blank",style:{color:"#1976d2","text-decoration":"underline",cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"180px",display:"inline-block"}},p(n.row.promotionUrl),9,St)]),_:2},1024)]),"body-cell-image":r(n=>[i(w,{align:"center"},{default:r(()=>[i(I,{anchor:"top middle",self:"bottom middle"},{default:r(()=>[u("img",{src:n.row.image,style:{"max-width":"200px","max-height":"200px","border-radius":"8px"}},null,8,Ut)]),_:2},1024),u("img",{src:n.row.image,style:{width:"40px",height:"40px","object-fit":"cover","border-radius":"6px",cursor:"pointer",border:"1px solid #eee"}},null,8,Tt)]),_:2},1024)]),"body-cell-price":r(n=>[i(w,{align:"center"},{default:r(()=>[u("span",null,p(n.row.price),1)]),_:2},1024)]),"body-cell-actions":r(n=>[i(w,{align:"center"},{default:r(()=>[i(l,{size:"sm",color:"primary",flat:"",icon:"edit",onClick:Ne=>$(n.row),round:"",dense:""},null,8,["onClick"]),i(l,{size:"sm",color:"negative",flat:"",icon:"delete",onClick:Ne=>S(n.row),round:"",dense:""},null,8,["onClick"])]),_:2},1024)]),bottom:r(()=>[u("div",Nt,[u("div",Ot,[i(d,{modelValue:s.value.rowsPerPage,"onUpdate:modelValue":[t[1]||(t[1]=n=>s.value.rowsPerPage=n),F],options:[10,20,50,100],dense:"",outlined:"",label:"페이지당 행 수",style:{"min-width":"120px"}},null,8,["modelValue"])]),u("div",Dt,[i(V,{modelValue:s.value.page,"onUpdate:modelValue":[t[2]||(t[2]=n=>s.value.page=n),oe],max:E.value,"max-pages":6,"boundary-numbers":"","direction-links":""},null,8,["modelValue","max"])]),u("div",At," 총 "+p(s.value.rowsNumber)+"개 중 "+p(L.value.start)+"-"+p(L.value.end)+"개 ",1)])]),_:1},8,["rows","pagination"]),i(ie,{modelValue:a.value.visible,"onUpdate:modelValue":t[10]||(t[10]=n=>a.value.visible=n)},{default:r(()=>[i(ne,{style:{"min-width":"350px","max-width":"90vw"}},{default:r(()=>[i(R,null,{default:r(()=>[u("div",Et,p(a.value.mode==="add"?"상품 추가":"상품 수정"),1)]),_:1}),i(R,null,{default:r(()=>[i(d,{modelValue:a.value.form.category,"onUpdate:modelValue":t[3]||(t[3]=n=>a.value.form.category=n),options:g.value.filter(n=>n.value!=="전체"),label:"카테고리",dense:"",outlined:"",class:"q-mb-sm","emit-value":"","map-options":""},null,8,["modelValue","options"]),i(W,{modelValue:a.value.form.url,"onUpdate:modelValue":t[4]||(t[4]=n=>a.value.form.url=n),label:"상품 URL",dense:"",outlined:"",class:"q-mb-sm",autofocus:""},null,8,["modelValue"]),i(W,{modelValue:a.value.form.name,"onUpdate:modelValue":t[5]||(t[5]=n=>a.value.form.name=n),label:"상품명",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"]),i(l,{color:"primary",label:"상품 정보 가져오기",class:"q-mb-md",onClick:Y,unelevated:""}),a.value.infoVisible?(te(),we("div",Lt,[u("div",Bt,[u("div",Mt,[a.value.form.image?(te(),se(I,{key:0},{default:r(()=>[u("img",{src:a.value.form.image,style:{width:"220px",height:"220px","object-fit":"contain","border-radius":"12px",border:"1px solid #eee",background:"#fff"}},null,8,Rt)]),_:1})):le("",!0),a.value.form.image?ae((te(),we("img",{key:1,src:a.value.form.image,style:{width:"60px",height:"60px","object-fit":"cover","border-radius":"8px",border:"1px solid #eee",cursor:"pointer"}},null,8,$t)),[[Te]]):le("",!0)])]),i(W,{modelValue:a.value.form.code,"onUpdate:modelValue":t[6]||(t[6]=n=>a.value.form.code=n),label:"상품 번호",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"]),i(W,{modelValue:a.value.form.desc,"onUpdate:modelValue":t[7]||(t[7]=n=>a.value.form.desc=n),label:"상품 설명",dense:"",outlined:"",class:"q-mb-sm",type:"textarea",autogrow:""},null,8,["modelValue"]),i(W,{modelValue:a.value.form.price,"onUpdate:modelValue":t[8]||(t[8]=n=>a.value.form.price=n),label:"상품 가격",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"]),i(W,{modelValue:a.value.form.affiliateUrl,"onUpdate:modelValue":t[9]||(t[9]=n=>a.value.form.affiliateUrl=n),label:"상품 제휴 URL",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"])])):le("",!0)]),_:1}),i(j,{align:"center",class:"q-gutter-sm q-mt-sm q-mb-md"},{default:r(()=>[ae(i(l,{color:"grey-5","text-color":"dark",label:"취소",rounded:"",unelevated:"",class:"q-px-lg"},null,512),[[re]]),i(l,{color:"primary",label:a.value.mode==="add"?"추가":"수정",onClick:Z,rounded:"",unelevated:"",class:"q-px-lg"},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(ie,{modelValue:k.value.visible,"onUpdate:modelValue":t[11]||(t[11]=n=>k.value.visible=n)},{default:r(()=>[i(ne,null,{default:r(()=>[i(R,{class:"row items-center justify-center"},{default:r(()=>[i(me,{name:"help",color:"primary",class:"q-mr-sm",size:"sm"}),u("span",jt,p(k.value.mode==="add"?"상품을 추가":"상품을 수정")+" 하시겠습니까?",1)]),_:1}),i(j,{align:"center",class:"q-gutter-sm q-mb-md"},{default:r(()=>[ae(i(l,{color:"grey-5","text-color":"dark",label:"취소",rounded:"",unelevated:"",class:"q-px-lg"},null,512),[[re]]),i(l,{color:"primary",label:"확인",onClick:O,rounded:"",unelevated:"",class:"q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(ie,{modelValue:P.value.visible,"onUpdate:modelValue":t[13]||(t[13]=n=>P.value.visible=n)},{default:r(()=>[i(ne,{style:{"min-width":"400px","max-width":"90vw"}},{default:r(()=>[i(R,null,{default:r(()=>[u("div",Ft,[i(me,{name:"delete",color:"negative",class:"q-mr-sm"}),t[15]||(t[15]=K(" 상품 삭제 확인 "))])]),_:1}),P.value.row?(te(),se(R,{key:0},{default:r(()=>[t[21]||(t[21]=u("div",{class:"text-subtitle2 q-mb-md"},"다음 상품을 삭제하시겠습니까?",-1)),u("div",Ht,[u("div",zt,[u("img",{src:P.value.row.image,style:{width:"100px",height:"100px","object-fit":"cover","border-radius":"8px",border:"1px solid #eee"},onError:t[12]||(t[12]=n=>n.target.src="https://via.placeholder.com/100x100?text=No+Image")},null,40,Wt)]),u("div",Kt,[u("div",Qt,[u("div",Gt,[u("div",Yt,p(P.value.row.name),1)]),u("div",Xt,[t[16]||(t[16]=u("div",{class:"text-caption text-grey-6"},"카테고리",-1)),u("div",Zt,p(P.value.row.category),1)]),u("div",Jt,[t[17]||(t[17]=u("div",{class:"text-caption text-grey-6"},"상품 코드",-1)),u("div",eo,p(P.value.row.code),1)]),u("div",to,[t[18]||(t[18]=u("div",{class:"text-caption text-grey-6"},"가격",-1)),u("div",oo,p(P.value.row.price),1)]),u("div",lo,[t[19]||(t[19]=u("div",{class:"text-caption text-grey-6"},"상품 설명",-1)),u("div",ao,p(P.value.row.desc),1)]),u("div",no,[t[20]||(t[20]=u("div",{class:"text-caption text-grey-6"},"프로모션 URL",-1)),u("div",io,[u("a",{href:P.value.row.promotionUrl,target:"_blank",style:{color:"#1976d2","text-decoration":"underline"}},p(P.value.row.promotionUrl),9,ro)])])])])])]),_:1,__:[21]})):le("",!0),i(j,{align:"right",class:"q-gutter-sm q-pa-md"},{default:r(()=>[ae(i(l,{color:"grey-5","text-color":"dark",label:"취소",rounded:"",unelevated:"",class:"q-px-lg"},null,512),[[re]]),i(l,{color:"negative",label:"삭제",onClick:ee,rounded:"",unelevated:"",class:"q-px-lg",loading:B.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(ie,{modelValue:b.value.visible,"onUpdate:modelValue":t[14]||(t[14]=n=>b.value.visible=n)},{default:r(()=>[i(ne,null,{default:r(()=>[i(R,{class:"row items-center justify-center"},{default:r(()=>[i(me,{name:"delete",color:"negative",class:"q-mr-sm",size:"sm"}),t[22]||(t[22]=u("span",{class:"text-subtitle1"},"정말로 이 상품을 삭제하시겠습니까?",-1))]),_:1,__:[22]}),b.value.row?(te(),se(R,{key:0,class:"text-center"},{default:r(()=>[u("div",so,p(b.value.row.name),1),u("div",uo,"카테고리: "+p(b.value.row.category),1),u("div",co,"Ali 상품 ID: "+p(b.value.row.aliProductId),1),u("div",mo,"상품 코드: "+p(b.value.row.code),1)]),_:1})):le("",!0),i(j,{align:"center",class:"q-gutter-sm q-mb-md"},{default:r(()=>[ae(i(l,{color:"grey-5","text-color":"dark",label:"취소",rounded:"",unelevated:"",class:"q-px-lg"},null,512),[[re]]),i(l,{color:"negative",label:"삭제",onClick:T,rounded:"",unelevated:"",class:"q-px-lg",loading:B.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Vo=De(go,[["__scopeId","data-v-367d4775"]]);export{Vo as default};
