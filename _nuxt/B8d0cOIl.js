import{r as d,bJ as i,k as m,K as g}from"./4dOPgbBj.js";const b={apiBase:"http://localhost:9443",apiTimeout:5e3,enableDebug:!0,enableApiLogs:!0},B={apiBase:"https://stg-api.wevesoft.com",apiTimeout:1e4,enableDebug:!0,enableApiLogs:!0},A={apiBase:"https://dev.deallow.kr:9443",apiTimeout:15e3,enableDebug:!1,enableApiLogs:!0},r={development:b,staging:B,production:A},C=()=>{const o=d(null),s=d(!1),l=d(null),a=()=>{const e=window.location.hostname,n=window.location.port;return console.log("ðŸ” í™˜ê²½ ê°ì§€:",{hostname:e,port:n}),e==="localhost"||e==="127.0.0.1"||n==="3000"?(console.log("âœ… LOCAL í™˜ê²½ ê°ì§€ (localhost)"),"development"):e==="wevesoft.github.io"?(console.log("âœ… GITHUB PAGES í™˜ê²½ ê°ì§€ (wevesoft.github.io)"),"production"):e.includes("stg")||e.includes("staging")?(console.log("âœ… STAGING í™˜ê²½ ê°ì§€"),"staging"):(console.log("âœ… PRODUCTION í™˜ê²½ ê°ì§€"),"production")},c=()=>{var e;try{s.value=!0,l.value=null,console.log("ðŸš€ loadConfig ì‹œìž‘");const n=a();if(console.log("ðŸŒ í˜„ìž¬ í™˜ê²½:",n),console.log("ðŸ“„ config.json ì›ë³¸ ë°ì´í„°:",r),console.log("ðŸ“„ í™˜ê²½ë³„ ì„¤ì •:",{development:r.development,staging:r.staging,production:r.production}),o.value=r[n]||r.production,console.log("âš™ï¸ ë¡œë“œëœ ì„¤ì •:",o.value),console.log("âœ… config.value.apiBase:",(e=o.value)==null?void 0:e.apiBase),!o.value||!o.value.apiBase)throw new Error("config.jsonì—ì„œ ìœ íš¨í•œ ì„¤ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")}catch(n){l.value=n instanceof Error?n.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜",console.error("âŒ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:",n),console.error("âŒ ì—ëŸ¬ ìƒì„¸:",{message:n.message,stack:n.stack}),alert(`ì„¤ì • ë¡œë“œ ì‹¤íŒ¨: ${l.value}

íŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.`),o.value=null}finally{s.value=!1,console.log("ðŸ loadConfig ì™„ë£Œ - loading:",s.value,"config:",o.value)}},t=async(e,n={})=>{var f;if(o.value||c(),!o.value||!o.value.apiBase)throw new Error("API ì„¤ì •ì´ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");const v=`${o.value.apiBase}${e}`,h=o.value.apiTimeout;try{const u=new AbortController,w=setTimeout(()=>u.abort(),h),p=await fetch(v,{...n,signal:u.signal,credentials:"include",headers:{"Content-Type":"application/json",...n.headers}});if(clearTimeout(w),!p.ok)throw new Error(`HTTP ${p.status}: ${p.statusText}`);return await p.json()}catch(u){throw(f=o.value)!=null&&f.enableDebug&&console.error("âŒ API í˜¸ì¶œ ì‹¤íŒ¨:",u),u}};return console.log("ðŸš€ useConfig ì´ˆê¸°í™” - config.json ë¡œë”© ì‹œìž‘"),c(),{config:i(o),loading:i(s),error:i(l),loadConfig:c,apiCall:t,getEnvironment:a}},y=()=>{const{config:o,loading:s,error:l}=C(),a=m(()=>{var t;return s.value?(console.log("â³ config.json ë¡œë”© ì¤‘ - ê¸°ë³¸ê°’ ì‚¬ìš©"),"https://localhost:9443"):(t=o.value)!=null&&t.apiBase?(console.log("âœ… Config.jsonì—ì„œ API Base ì‚¬ìš©:",o.value.apiBase),o.value.apiBase):(console.log("ðŸ”„ ê¸°ë³¸ API Base ì‚¬ìš©: https://localhost:9443"),"https://localhost:9443")}),c={async get(t,e){const n=e?`?${new URLSearchParams(e).toString()}`:"";return console.log("ðŸª ì¿ í‚¤ í™•ì¸:",document.cookie),(await g.get(`${a.value}${t}${n}`,{withCredentials:!0})).data},async post(t,e){return console.log("ðŸª ì¿ í‚¤ í™•ì¸:",document.cookie),console.log("ðŸ”’ í”„ë¡œí† ì½œ í™•ì¸:",{currentProtocol:window.location.protocol,apiBase:a.value,apiProtocol:new URL(a.value).protocol,userAgent:navigator.userAgent,isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}),(await g.post(`${a.value}${t}`,e,{withCredentials:!0})).data},async put(t,e){return console.log("ðŸª ì¿ í‚¤ í™•ì¸:",document.cookie),(await g.put(`${a.value}${t}`,e,{withCredentials:!0})).data},async delete(t){return console.log("ðŸª ì¿ í‚¤ í™•ì¸:",document.cookie),(await g.delete(`${a.value}${t}`,{withCredentials:!0})).data},async upload(t,e){return console.log("ðŸª ì¿ í‚¤ í™•ì¸:",document.cookie),(await g.post(`${a.value}${t}`,e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}};return{config:i(o),loading:i(s),error:i(l),apiBase:a,api:c,debug:()=>{console.log("ðŸ”§ API ì„¤ì • ì •ë³´:",{apiBase:a.value,environment:o.value,loading:s.value,error:l.value})}}};export{y as u};
