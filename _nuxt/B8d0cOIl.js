import{r as d,bJ as i,k as m,K as g}from"./4dOPgbBj.js";const b={apiBase:"http://localhost:9443",apiTimeout:5e3,enableDebug:!0,enableApiLogs:!0},B={apiBase:"https://stg-api.wevesoft.com",apiTimeout:1e4,enableDebug:!0,enableApiLogs:!0},A={apiBase:"https://dev.deallow.kr:9443",apiTimeout:15e3,enableDebug:!1,enableApiLogs:!0},r={development:b,staging:B,production:A},C=()=>{const o=d(null),s=d(!1),l=d(null),a=()=>{const e=window.location.hostname,n=window.location.port;return console.log("🔍 환경 감지:",{hostname:e,port:n}),e==="localhost"||e==="127.0.0.1"||n==="3000"?(console.log("✅ LOCAL 환경 감지 (localhost)"),"development"):e==="wevesoft.github.io"?(console.log("✅ GITHUB PAGES 환경 감지 (wevesoft.github.io)"),"production"):e.includes("stg")||e.includes("staging")?(console.log("✅ STAGING 환경 감지"),"staging"):(console.log("✅ PRODUCTION 환경 감지"),"production")},c=()=>{var e;try{s.value=!0,l.value=null,console.log("🚀 loadConfig 시작");const n=a();if(console.log("🌍 현재 환경:",n),console.log("📄 config.json 원본 데이터:",r),console.log("📄 환경별 설정:",{development:r.development,staging:r.staging,production:r.production}),o.value=r[n]||r.production,console.log("⚙️ 로드된 설정:",o.value),console.log("✅ config.value.apiBase:",(e=o.value)==null?void 0:e.apiBase),!o.value||!o.value.apiBase)throw new Error("config.json에서 유효한 설정을 찾을 수 없습니다.")}catch(n){l.value=n instanceof Error?n.message:"알 수 없는 오류",console.error("❌ 설정 로드 실패:",n),console.error("❌ 에러 상세:",{message:n.message,stack:n.stack}),alert(`설정 로드 실패: ${l.value}

페이지를 새로고침해주세요.`),o.value=null}finally{s.value=!1,console.log("🏁 loadConfig 완료 - loading:",s.value,"config:",o.value)}},t=async(e,n={})=>{var f;if(o.value||c(),!o.value||!o.value.apiBase)throw new Error("API 설정이 로드되지 않았습니다.");const v=`${o.value.apiBase}${e}`,h=o.value.apiTimeout;try{const u=new AbortController,w=setTimeout(()=>u.abort(),h),p=await fetch(v,{...n,signal:u.signal,credentials:"include",headers:{"Content-Type":"application/json",...n.headers}});if(clearTimeout(w),!p.ok)throw new Error(`HTTP ${p.status}: ${p.statusText}`);return await p.json()}catch(u){throw(f=o.value)!=null&&f.enableDebug&&console.error("❌ API 호출 실패:",u),u}};return console.log("🚀 useConfig 초기화 - config.json 로딩 시작"),c(),{config:i(o),loading:i(s),error:i(l),loadConfig:c,apiCall:t,getEnvironment:a}},y=()=>{const{config:o,loading:s,error:l}=C(),a=m(()=>{var t;return s.value?(console.log("⏳ config.json 로딩 중 - 기본값 사용"),"https://localhost:9443"):(t=o.value)!=null&&t.apiBase?(console.log("✅ Config.json에서 API Base 사용:",o.value.apiBase),o.value.apiBase):(console.log("🔄 기본 API Base 사용: https://localhost:9443"),"https://localhost:9443")}),c={async get(t,e){const n=e?`?${new URLSearchParams(e).toString()}`:"";return console.log("🍪 쿠키 확인:",document.cookie),(await g.get(`${a.value}${t}${n}`,{withCredentials:!0})).data},async post(t,e){return console.log("🍪 쿠키 확인:",document.cookie),console.log("🔒 프로토콜 확인:",{currentProtocol:window.location.protocol,apiBase:a.value,apiProtocol:new URL(a.value).protocol,userAgent:navigator.userAgent,isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}),(await g.post(`${a.value}${t}`,e,{withCredentials:!0})).data},async put(t,e){return console.log("🍪 쿠키 확인:",document.cookie),(await g.put(`${a.value}${t}`,e,{withCredentials:!0})).data},async delete(t){return console.log("🍪 쿠키 확인:",document.cookie),(await g.delete(`${a.value}${t}`,{withCredentials:!0})).data},async upload(t,e){return console.log("🍪 쿠키 확인:",document.cookie),(await g.post(`${a.value}${t}`,e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}};return{config:i(o),loading:i(s),error:i(l),apiBase:a,api:c,debug:()=>{console.log("🔧 API 설정 정보:",{apiBase:a.value,environment:o.value,loading:s.value,error:l.value})}}};export{y as u};
