import{r as v,bG as h,k as d}from"./Bhr7ZxFu.js";const w=()=>{const o=v(null),c=v(!0),u=v(null),s=()=>{{const t=window.location.hostname,a=window.location.port,l=window.location.href;return console.log("ðŸ” í™˜ê²½ ê°ì§€:",{hostname:t,port:a,fullUrl:l}),t==="localhost"||t==="127.0.0.1"||a==="3000"?(console.log("âœ… LOCAL í™˜ê²½ ê°ì§€ (localhost)"),"development"):t==="wevesoft.github.io"?(console.log("âœ… GITHUB PAGES í™˜ê²½ ê°ì§€ (wevesoft.github.io)"),"production"):t.includes("stg")||t.includes("staging")?(console.log("âœ… STAGING í™˜ê²½ ê°ì§€"),"staging"):(console.log("âœ… PRODUCTION í™˜ê²½ ê°ì§€"),"production")}},g=async()=>{try{c.value=!0,u.value=null;const t=s();console.log("ðŸŒ í˜„ìž¬ í™˜ê²½:",t);let a="/config.json";if(window.location.hostname==="wevesoft.github.io"){const i=window.location.pathname.split("/").filter(r=>r)[0]||"";a=i?`/${i}/config.json`:"/config.json",console.log("ðŸ“ GitHub Pages config.json ê²½ë¡œ:",a)}const l=await fetch(a);if(!l.ok)throw new Error(`ì„¤ì • íŒŒì¼ì„ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (${l.status})`);const p=await l.json();o.value=p[t]||p.production,console.log("âš™ï¸ ë¡œë“œëœ ì„¤ì •:",o.value)}catch(t){u.value=t instanceof Error?t.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜",console.error("âŒ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:",t),s()==="development"?(o.value={apiBase:"https://localhost:9443",apiTimeout:5e3,enableDebug:!0},console.log("ðŸ”„ Development fallback ì„¤ì •:",o.value)):(o.value={apiBase:"https://dev.deallow.kr:9443",apiTimeout:15e3,enableDebug:!1},console.log("ðŸ”„ Production fallback ì„¤ì •:",o.value))}finally{c.value=!1}},f=async(t,a={})=>{var n;o.value||await g();const l=`${o.value.apiBase}${t}`,p=o.value.apiTimeout;try{const e=new AbortController,i=setTimeout(()=>e.abort(),p),r=await fetch(l,{...a,signal:e.signal,headers:{"Content-Type":"application/json",...a.headers}});if(clearTimeout(i),!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return await r.json()}catch(e){throw(n=o.value)!=null&&n.enableDebug&&console.error("âŒ API í˜¸ì¶œ ì‹¤íŒ¨:",e),e}};return g(),{config:h(o),loading:h(c),error:h(u),loadConfig:g,apiCall:f,getEnvironment:s}},b=()=>{const{config:o,loading:c,error:u,apiCall:s}=w(),g=d(()=>{var e,i,r;if(console.log("ðŸ”§ API Base ê³„ì‚° ì‹œìž‘:",{configExists:!!o.value,configValue:o.value,loading:c.value,error:u.value}),(e=o.value)!=null&&e.apiBase)return console.log("âœ… Config.jsonì—ì„œ API Base ì‚¬ìš©:",o.value.apiBase),o.value.apiBase;if(console.log("ðŸ”§ API Base ì„¤ì •:",{hostname:window.location.hostname,port:window.location.port,isLocalhost:window.location.hostname==="localhost"||window.location.port==="3000"}),window.location.hostname==="localhost"||window.location.port==="3000")return console.log("âœ… Localhost API ì‚¬ìš©: https://localhost:9443"),"https://localhost:9443";const n="https://dev.deallow.kr:9443";return console.log("ðŸŒ Remote API ì‚¬ìš©:",((i=o.value)==null?void 0:i.apiBase)||n),((r=o.value)==null?void 0:r.apiBase)||n}),f=d(()=>"https://localhost:9443"),t=d(()=>"https://dev-api.wevesoft.com"),a=d(()=>"https://stg-api.wevesoft.com"),l=d(()=>"https://api.wevesoft.com"),p={async get(n,e){const i=e?`?${new URLSearchParams(e).toString()}`:"";return await s(`${n}${i}`,{method:"GET"})},async post(n,e){return await s(n,{method:"POST",body:e?JSON.stringify(e):void 0})},async put(n,e){return await s(n,{method:"PUT",body:e?JSON.stringify(e):void 0})},async delete(n){return await s(n,{method:"DELETE"})},async upload(n,e){return await s(n,{method:"POST",body:e,headers:{}})}};return{config:h(o),loading:h(c),error:h(u),apiBase:g,apiBaseLocal:f,apiBaseDev:t,apiBaseStg:a,apiBasePrd:l,api:p,debug:()=>{console.log("ðŸ”§ API ì„¤ì • ì •ë³´:",{apiBase:g.value,environment:o.value,loading:c.value,error:u.value})}}};export{b as u};
