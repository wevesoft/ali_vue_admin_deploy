import{r as v,bG as p,k as g}from"./COI8IgHA.js";const f=()=>{const t=v(null),r=v(!0),i=v(null),s=()=>{{const e=window.location.hostname,a=window.location.port,l=window.location.href;return console.log("🔍 환경 감지:",{hostname:e,port:a,fullUrl:l}),e==="localhost"||e==="127.0.0.1"||a==="3000"?(console.log("✅ LOCAL 환경 감지 (localhost)"),"development"):e==="wevesoft.github.io"?(console.log("✅ GITHUB PAGES 환경 감지 (wevesoft.github.io)"),"production"):e.includes("stg")||e.includes("staging")?(console.log("✅ STAGING 환경 감지"),"staging"):(console.log("✅ PRODUCTION 환경 감지"),"production")}},c=async()=>{try{r.value=!0,i.value=null;const e=s();console.log("🌍 현재 환경:",e);const a=await fetch("/config.json");if(!a.ok)throw new Error("설정 파일을 로드할 수 없습니다.");const l=await a.json();t.value=l[e]||l.production,console.log("⚙️ 로드된 설정:",t.value)}catch(e){i.value=e instanceof Error?e.message:"알 수 없는 오류",console.error("❌ 설정 로드 실패:",e),t.value={apiBase:"http://dev.deallow.kr:8080",apiTimeout:15e3,enableDebug:!1}}finally{r.value=!1}},h=async(e,a={})=>{var n;t.value||await c();const l=`${t.value.apiBase}${e}`,w=t.value.apiTimeout;try{const o=new AbortController,u=setTimeout(()=>o.abort(),w),d=await fetch(l,{...a,signal:o.signal,headers:{"Content-Type":"application/json",...a.headers}});if(clearTimeout(u),!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);return await d.json()}catch(o){throw(n=t.value)!=null&&n.enableDebug&&console.error("❌ API 호출 실패:",o),o}};return c(),{config:p(t),loading:p(r),error:p(i),loadConfig:c,apiCall:h,getEnvironment:s}},y=()=>{const{config:t,loading:r,error:i,apiCall:s}=f(),c=g(()=>{var n,o,u;return(n=t.value)!=null&&n.apiBase?(console.log("✅ Config.json에서 API Base 사용:",t.value.apiBase),t.value.apiBase):(console.log("🔧 API Base 설정:",{hostname:window.location.hostname,port:window.location.port,isLocalhost:window.location.hostname==="localhost"||window.location.port==="3000"}),window.location.hostname==="localhost"||window.location.port==="3000"?(console.log("✅ Localhost API 사용: http://localhost:8081"),"http://localhost:8081"):(console.log("🌐 Remote API 사용:",((o=t.value)==null?void 0:o.apiBase)||"http://dev.deallow.kr:8080"),((u=t.value)==null?void 0:u.apiBase)||"http://dev.deallow.kr:8080"))}),h=g(()=>"http://localhost:8080"),e=g(()=>"https://dev-api.wevesoft.com"),a=g(()=>"https://stg-api.wevesoft.com"),l=g(()=>"https://api.wevesoft.com"),w={async get(n,o){const u=o?`?${new URLSearchParams(o).toString()}`:"";return await s(`${n}${u}`,{method:"GET"})},async post(n,o){return await s(n,{method:"POST",body:o?JSON.stringify(o):void 0})},async put(n,o){return await s(n,{method:"PUT",body:o?JSON.stringify(o):void 0})},async delete(n){return await s(n,{method:"DELETE"})},async upload(n,o){return await s(n,{method:"POST",body:o,headers:{}})}};return{config:p(t),loading:p(r),error:p(i),apiBase:c,apiBaseLocal:h,apiBaseDev:e,apiBaseStg:a,apiBasePrd:l,api:w,debug:()=>{console.log("🔧 API 설정 정보:",{apiBase:c.value,environment:t.value,loading:r.value,error:i.value})}}};export{y as u};
