import{r as f,bG as u,k as p}from"./CtT8G-vu.js";const m=()=>{const n=f(null),r=f(!0),l=f(null),s=()=>{{const t=window.location.hostname,a=window.location.port;return console.log("ðŸ” í™˜ê²½ ê°ì§€:",{hostname:t,port:a,fullUrl:window.location.href}),t==="localhost"||t==="127.0.0.1"||a==="3000"?(console.log("âœ… Development í™˜ê²½ ê°ì§€"),"development"):t.includes("stg")||t.includes("staging")?(console.log("âœ… Staging í™˜ê²½ ê°ì§€"),"staging"):(console.log("âœ… Production í™˜ê²½ ê°ì§€"),"production")}},i=async()=>{try{r.value=!0,l.value=null;const t=s();console.log("ðŸŒ í˜„ìž¬ í™˜ê²½:",t);const a=await fetch("/config.json");if(!a.ok)throw new Error("ì„¤ì • íŒŒì¼ì„ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");const c=await a.json();n.value=c[t]||c.production,console.log("âš™ï¸ ë¡œë“œëœ ì„¤ì •:",n.value)}catch(t){l.value=t instanceof Error?t.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜",console.error("âŒ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:",t),n.value={apiBase:"https://api.wevesoft.com",apiTimeout:15e3,enableDebug:!1}}finally{r.value=!1}},w=async(t,a={})=>{var e;n.value||await i();const c=`${n.value.apiBase}${t}`,d=n.value.apiTimeout;try{const o=new AbortController,h=setTimeout(()=>o.abort(),d),g=await fetch(c,{...a,signal:o.signal,headers:{"Content-Type":"application/json",...a.headers}});if(clearTimeout(h),!g.ok)throw new Error(`HTTP ${g.status}: ${g.statusText}`);return await g.json()}catch(o){throw(e=n.value)!=null&&e.enableDebug&&console.error("âŒ API í˜¸ì¶œ ì‹¤íŒ¨:",o),o}};return i(),{config:u(n),loading:u(r),error:u(l),loadConfig:i,apiCall:w,getEnvironment:s}},y=()=>{const{config:n,loading:r,error:l,apiCall:s}=m(),i=p(()=>{var e,o;return console.log("ðŸ”§ API Base ì„¤ì •:",{hostname:window.location.hostname,port:window.location.port,isLocalhost:window.location.hostname==="localhost"||window.location.port==="3000"}),window.location.hostname==="localhost"||window.location.port==="3000"?(console.log("âœ… Localhost API ì‚¬ìš©: http://localhost:8080"),"http://localhost:8080"):(console.log("ðŸŒ Remote API ì‚¬ìš©:",((e=n.value)==null?void 0:e.apiBase)||"https://api.wevesoft.com"),((o=n.value)==null?void 0:o.apiBase)||"https://api.wevesoft.com")}),w=p(()=>"http://localhost:8080"),t=p(()=>"https://dev-api.wevesoft.com"),a=p(()=>"https://stg-api.wevesoft.com"),c=p(()=>"https://api.wevesoft.com"),d={async get(e,o){const h=o?`?${new URLSearchParams(o).toString()}`:"";return await s(`${e}${h}`,{method:"GET"})},async post(e,o){return await s(e,{method:"POST",body:o?JSON.stringify(o):void 0})},async put(e,o){return await s(e,{method:"PUT",body:o?JSON.stringify(o):void 0})},async delete(e){return await s(e,{method:"DELETE"})},async upload(e,o){return await s(e,{method:"POST",body:o,headers:{}})}};return{config:u(n),loading:u(r),error:u(l),apiBase:i,apiBaseLocal:w,apiBaseDev:t,apiBaseStg:a,apiBasePrd:c,api:d,debug:()=>{console.log("ðŸ”§ API ì„¤ì • ì •ë³´:",{apiBase:i.value,environment:n.value,loading:r.value,error:l.value})}}};export{y as u};
