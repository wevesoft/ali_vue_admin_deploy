import{a4 as pe,ak as ae,al as be,am as he,an as we,a7 as ye,r as k,k as B,ao as xe,ap as qe,aq as Ie,ar as ke,as as Pe,U as re,e as ne,at as se,au as de,av as Ce,h as X,ab as Ue,ac as ie,aw as Ve,ax as Te,ay as Oe,az as Se,aA as De,K as Y,C as a,R,Y as Ae,y as j,z as n,B as t,P as Ne,A as u,D as T,af as Ee,_ as Le,M as $e,x as ce,ae as z,N as Me,aB as F,aC as Re,O as je,a1 as Be,X as He}from"./DOs4IK1W.js";import{u as ze}from"./4SQwc3Ki.js";import{_ as Fe}from"./DlAUqK2U.js";import{_ as Ke}from"./9Zwq7gjS.js";import{v as We,a as ue,u as Ge,p as me,b as Qe,c as Ye,d as Xe,r as fe,s as Je,_ as Ze}from"./CrbBWx57.js";import{_ as et}from"./BoQ7iWCV.js";import{c as ve}from"./DdMp9BCd.js";import{_ as tt}from"./BdP7DyVM.js";import"./D-9GLWL1.js";import"./DKSX596j.js";const ot=pe({name:"QTooltip",inheritAttrs:!1,props:{...Ge,...we,...ae,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...ae.transitionShow,default:"jump-down"},transitionHide:{...ae.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ue},self:{type:String,default:"top middle",validator:ue},offset:{type:Array,default:()=>[14,14],validator:We},scrollTarget:he,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...be],setup(i,{slots:c,emit:f,attrs:I}){let b,y;const O=ye(),{proxy:{$q:h}}=O,e=k(null),v=k(!1),x=B(()=>me(i.anchor,h.lang.rtl)),p=B(()=>me(i.self,h.lang.rtl)),N=B(()=>i.persistent!==!0),{registerTick:_,removeTick:S}=xe(),{registerTimeout:E}=qe(),{transitionProps:J,transitionStyle:Z}=Ie(i),{localScrollTarget:K,changeScrollEvent:ee,unconfigureScrollTarget:te}=Qe(i,U),{anchorEl:P,canShow:oe,anchorEvents:D}=Ye({showing:v,configureAnchorEl:w}),{show:le,hide:H}=ke({showing:v,canShow:oe,handleShow:m,handleHide:s,hideOnRouteChange:N,processOnMount:!0});Object.assign(D,{delayShow:q,delayHide:L});const{showPortal:W,hidePortal:r,renderPortal:o}=Pe(O,e,M,"tooltip");if(h.platform.is.mobile===!0){const g={anchorEl:P,innerRef:e,onClickOutside(V){return H(V),V.target.classList.contains("q-dialog__backdrop")&&Ve(V),!0}},A=B(()=>i.modelValue===null&&i.persistent!==!0&&v.value===!0);re(A,V=>{(V===!0?Xe:fe)(g)}),ne(()=>{fe(g)})}function m(g){W(),_(()=>{y=new MutationObserver(()=>C()),y.observe(e.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),C(),U()}),b===void 0&&(b=re(()=>h.screen.width+"|"+h.screen.height+"|"+i.self+"|"+i.anchor+"|"+h.lang.rtl,C)),E(()=>{W(!0),f("show",g)},i.transitionDuration)}function s(g){S(),r(),d(),E(()=>{r(!0),f("hide",g)},i.transitionDuration)}function d(){y!==void 0&&(y.disconnect(),y=void 0),b!==void 0&&(b(),b=void 0),te(),se(D,"tooltipTemp")}function C(){Je({targetEl:e.value,offset:i.offset,anchorEl:P.value,anchorOrigin:x.value,selfOrigin:p.value,maxHeight:i.maxHeight,maxWidth:i.maxWidth})}function q(g){if(h.platform.is.mobile===!0){ve(),document.body.classList.add("non-selectable");const A=P.value,V=["touchmove","touchcancel","touchend","click"].map(G=>[A,G,"delayHide","passiveCapture"]);de(D,"tooltipTemp",V)}E(()=>{le(g)},i.delay)}function L(g){h.platform.is.mobile===!0&&(se(D,"tooltipTemp"),ve(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),E(()=>{H(g)},i.hideDelay)}function w(){if(i.noParentEvent===!0||P.value===null)return;const g=h.platform.is.mobile===!0?[[P.value,"touchstart","delayShow","passive"]]:[[P.value,"mouseenter","delayShow","passive"],[P.value,"mouseleave","delayHide","passive"]];de(D,"anchor",g)}function U(){if(P.value!==null||i.scrollTarget!==void 0){K.value=Ce(P.value,i.scrollTarget);const g=i.noParentEvent===!0?C:H;ee(K.value,g)}}function $(){return v.value===!0?X("div",{...I,ref:e,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",I.class],style:[I.style,Z.value],role:"tooltip"},ie(c.default)):null}function M(){return X(Ue,J.value,$)}return ne(d),Object.assign(O.proxy,{updatePosition:C}),o}}),lt=pe({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(i,{slots:c}){const f=ye(),I=B(()=>"q-td"+(i.autoWidth===!0?" q-table--col-auto-width":"")+(i.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(i.props===void 0)return X("td",{class:I.value},ie(c.default));const b=f.vnode.key,y=(i.props.colsMap!==void 0?i.props.colsMap[b]:null)||i.props.col;if(y===void 0)return;const{row:O}=i.props;return X("td",{class:I.value+y.__tdClass(O),style:y.__tdStyle(O)},ie(c.default))}}});function ge(i){if(i===!1)return 0;if(i===!0||i===void 0)return 1;const c=parseInt(i,10);return isNaN(c)?0:c}const at=Te({name:"close-popup",beforeMount(i,{value:c}){const f={depth:ge(c),handler(I){f.depth!==0&&setTimeout(()=>{const b=Se(i);b!==void 0&&De(b,I,f.depth)})},handlerKey(I){Oe(I,13)===!0&&f.handler(I)}};i.__qclosepopup=f,i.addEventListener("click",f.handler),i.addEventListener("keyup",f.handlerKey)},updated(i,{value:c,oldValue:f}){c!==f&&(i.__qclosepopup.depth=ge(c))},beforeUnmount(i){const c=i.__qclosepopup;i.removeEventListener("click",c.handler),i.removeEventListener("keyup",c.handlerKey),delete i.__qclosepopup}}),rt={class:"q-mb-md row items-center justify-between"},it={class:"row items-center"},nt={style:{cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"120px",display:"inline-block"}},st={style:{cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"120px",display:"inline-block"}},dt={style:{cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"90px",display:"inline-block"}},ct={style:{cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"180px",display:"inline-block"}},ut=["href"],mt=["href"],ft=["src"],vt=["src"],gt={class:"text-h6"},pt={key:0},yt={class:"row q-gutter-md items-center q-mb-md"},_t={class:"col-auto"},bt=["src"],ht=["src"],wt={class:"text-subtitle1"},xt={class:"text-h6 text-negative"},qt={class:"row q-gutter-md"},It={class:"col-3"},kt=["src"],Pt={class:"col-9"},Ct={class:"row q-gutter-y-sm"},Ut={class:"col-12"},Vt={class:"text-weight-bold text-h6"},Tt={class:"col-6"},Ot={class:"text-body2"},St={class:"col-6"},Dt={class:"text-body2"},At={class:"col-12"},Nt={class:"text-body2 text-weight-bold text-primary"},Et={class:"col-12"},Lt={class:"text-body2",style:{"max-height":"60px",overflow:"hidden","text-overflow":"ellipsis"}},$t={class:"col-12"},Mt={class:"text-body2",style:{"max-height":"60px",overflow:"hidden","text-overflow":"ellipsis"}},Rt=["href"],jt={class:"text-weight-bold text-h6 q-mb-sm"},Bt={class:"text-caption text-grey-6"},Ht={class:"text-caption text-grey-6"},zt={class:"text-caption text-grey-6"},Ft={__name:"recommend-products",setup(i){const c=k([{label:"ì „ì²´",value:"ì „ì²´",categoryId:0,order:0}]),f=k("ì „ì²´"),I=[{name:"num",label:"ë²ˆí˜¸",field:r=>"",align:"center",sortable:!1,style:"min-width:60px;"},{name:"category",label:"ì¹´í…Œê³ ë¦¬",field:"category",align:"center",sortable:!0,style:"min-width:100px;"},{name:"aliProductId",label:"Ali ìƒí’ˆ ID",field:"aliProductId",align:"center",sortable:!0,style:"min-width:120px;"},{name:"name",label:"ìƒí’ˆ ì´ë¦„",field:"name",align:"center",sortable:!0,style:"min-width:120px;"},{name:"code",label:"ìƒí’ˆ ë²ˆí˜¸",field:"code",align:"center",sortable:!0,style:"min-width:90px;"},{name:"desc",label:"ìƒí’ˆ ì„¤ëª…",field:"desc",align:"center",style:"min-width:180px;"},{name:"url",label:"ìƒí’ˆ URL",field:"url",align:"center",style:"min-width:180px;"},{name:"promotionUrl",label:"í”„ë¡œëª¨ì…˜ URL",field:"promotionUrl",align:"center",style:"min-width:180px;"},{name:"image",label:"ìƒí’ˆ ì´ë¯¸ì§€",field:"image",align:"center",style:"min-width:70px;"},{name:"price",label:"ê°€ê²©",field:"price",align:"center",sortable:!0,style:"min-width:80px;"},{name:"actions",label:"ê´€ë¦¬",field:"actions",align:"center"}];async function b(){try{const r=c.value.find(d=>d.value===f.value),m={categoryId:r?r.categoryId:0,limit:h.value.rowsPerPage,offset:(h.value.page-1)*h.value.rowsPerPage},s=await R.post(`${S}/recommended/product/list`,m,{withCredentials:!0});Array.isArray(s.data)?(console.log("Fetched products:",s.data),y.value=s.data.map(d=>{console.log("ðŸ” Product Category Mapping:",{productCategoryId:d.categoryId,productCategoryIdType:typeof d.categoryId,convertedCategoryId:Number(d.categoryId),availableCategories:c.value.map(w=>({categoryId:w.categoryId,categoryIdType:typeof w.categoryId,label:w.label}))});const C=Number(d.categoryId),q=c.value.find(w=>w.categoryId===C),L=q?q.label:"ê¸°íƒ€";return console.log("ðŸ“‹ Category Mapping Result:",{productCategoryId:d.categoryId,convertedCategoryId:Number(d.categoryId),foundCategoryOption:q,finalCategoryLabel:L}),{seq:d.seq,category:L,aliProductId:d.aliProductId||"",name:d.productName,code:d.productId,desc:d.productDesc,url:d.productUrl,promotionUrl:d.promotionUrl,image:d.imageUrl,price:`${d.price.toLocaleString()}ì›`}})):(console.error("Invalid response format:",s.data),y.value=[])}catch(r){console.error("Fetch products error:",r),_.notify({type:"negative",message:"ìƒí’ˆ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."}),y.value=[]}}const y=k([]),O=B(()=>f.value==="ì „ì²´"?y.value:y.value.filter(r=>r.category===f.value)),h=k({page:1,rowsPerPage:20}),e=k({visible:!1,mode:"add",form:{seq:null,name:"",code:"",desc:"",url:"",image:"",price:"",affiliateUrl:""},infoVisible:!1}),v=k({visible:!1,row:null}),x=k({visible:!1,mode:"add"}),p=k({visible:!1,row:null}),N=k(!1),_=Ae(),{apiBase:S}=ze();async function E(){try{const r=await R.post(`${S}/recommended/category/list`,{},{withCredentials:!0});Array.isArray(r.data)&&(console.log("ðŸ“‚ Fetched Categories:",r.data),c.value=[{label:"ì „ì²´",value:"ì „ì²´",categoryId:0,order:0},...r.data.map(o=>({label:o.categoryName,value:o.categoryName,categoryId:Number(o.categoryId),order:o.order}))],console.log("âœ… Final CATEGORY_OPTIONS:",c.value))}catch(r){console.log(r)}}E(),b(),re([f,()=>h.value.page,()=>h.value.rowsPerPage],()=>{b()});function J(){if(!e.value.form.url){_.notify({type:"warning",message:"ìƒí’ˆ URLì„ ìž…ë ¥í•˜ì„¸ìš”."});return}const r=c.value.find(m=>m.value===e.value.form.category),o=r?r.categoryId:0;R.post(`${S}/recommended/get/product/detail`,{categoryName:e.value.form.category,categoryId:o,productUrl:e.value.form.url,productName:e.value.form.name},{withCredentials:!0}).then(m=>{if(console.log(m.data),m.data&&m.data.result===!0){const s=m.data;e.value.form.image=s.productMainImageUrl,e.value.form.code=s.productId,e.value.form.desc=s.productTitle,e.value.form.price=s.targetSalePrice,e.value.form.affiliateUrl=s.promotionLink,e.value.infoVisible=!0}else _.dialog({title:"ì•Œë¦¼",message:"ìƒí’ˆ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"}),e.value.infoVisible=!1}).catch(()=>{_.dialog({title:"ì•Œë¦¼",message:"ìƒí’ˆ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"}),e.value.infoVisible=!1})}function Z(){if(e.value.mode==="add"){if(!e.value.infoVisible){_.notify({type:"warning",message:"ìƒí’ˆ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì„¸ìš”."});return}x.value={visible:!0,mode:"add"}}else{if(!e.value.infoVisible){_.notify({type:"warning",message:"ìƒí’ˆ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì„¸ìš”."});return}x.value={visible:!0,mode:"edit"}}}function K(){const r=c.value.find(s=>s.value===e.value.form.category),o=r?r.categoryId:0,m={categoryName:e.value.form.category,categoryId:o,productName:e.value.form.name||`ìƒí’ˆ${y.value.length+1}`,productId:e.value.form.code,productdesc:e.value.form.desc,productUrl:e.value.form.url,imageUrl:e.value.form.image,price:e.value.form.price,affiliateUrl:e.value.form.affiliateUrl};R.post(`${S}/recommended/add/product`,m,{withCredentials:!0}).then(s=>{s.data&&s.data.result===!0?(_.dialog({title:"ì„±ê³µ",message:"ìƒí’ˆì´ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"primary"}),e.value={visible:!1,mode:"add",form:{seq:null,name:"",code:"",desc:"",url:"",image:"",price:"",affiliateUrl:""},infoVisible:!1},x.value={visible:!1,mode:"add"},b()):_.dialog({title:"ì‹¤íŒ¨",message:"ìƒí’ˆ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"})}).catch(()=>{_.dialog({title:"ì‹¤íŒ¨",message:"ìƒí’ˆ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"})})}function ee(){console.log("ðŸ”§ Confirm Action:",x.value.mode),x.value.mode==="add"?K():x.value.mode==="edit"&&te()}function te(){console.log("ðŸ”§ Modify Product Called"),console.log("ðŸ“‹ Dialog Form:",e.value.form);const r=c.value.find(s=>s.value===e.value.form.category),o=r?r.categoryId:0,m={categoryName:e.value.form.category,categoryId:o,productName:e.value.form.name||`ìƒí’ˆ${y.value.length+1}`,productId:e.value.form.code,productdesc:e.value.form.desc,productUrl:e.value.form.url,imageUrl:e.value.form.image,price:e.value.form.price,affiliateUrl:e.value.form.affiliateUrl};console.log("ðŸš€ Sending Modify Request:",m),R.post(`${S}/recommended/modify/product`,m,{withCredentials:!0}).then(s=>{s.data&&s.data.result===!0?(_.dialog({title:"ì„±ê³µ",message:"ìƒí’ˆì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"primary"}),e.value={visible:!1,mode:"add",form:{seq:null,name:"",code:"",desc:"",url:"",image:"",price:"",affiliateUrl:""},infoVisible:!1},x.value={visible:!1,mode:"add"},b()):_.dialog({title:"ì‹¤íŒ¨",message:"ìƒí’ˆ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"})}).catch(()=>{_.dialog({title:"ì‹¤íŒ¨",message:"ìƒí’ˆ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"})})}function P(){e.value={visible:!0,mode:"add",form:{seq:null,name:"",code:"",desc:"",url:"",image:"",price:"",affiliateUrl:""},infoVisible:!1},x.value={visible:!1,mode:"add"}}function oe(r){e.value={visible:!0,mode:"edit",form:{seq:r.seq,category:r.category,name:r.name,code:r.code,desc:r.desc,url:r.url,image:r.image,price:r.price,affiliateUrl:r.promotionUrl||r.affiliateUrl||""},infoVisible:!0},x.value={visible:!1,mode:"edit"}}function D(r){v.value={visible:!0,row:r},p.value={visible:!1,row:null}}function le(){v.value.row&&(v.value.visible=!1,He(()=>{p.value={visible:!0,row:v.value.row}}))}function H(r){console.log("ðŸ” Getting categoryId for:",r),console.log("ðŸ“‹ Available categories:",c.value);const o=c.value.find(s=>s.label===r),m=o?o.categoryId:0;return console.log("âœ… Found categoryId:",m,"for category:",r),m}async function W(){if(p.value.row){N.value=!0;try{console.log("ðŸ—‘ï¸ Executing Delete Product:",p.value.row);const r=await R.post(`${S}/recommended/remove/product`,{productId:p.value.row.code,productName:p.value.row.name,aliProductId:p.value.row.aliProductId,categoryId:H(p.value.row.category)},{withCredentials:!0});console.log("ðŸ—‘ï¸ Delete Response:",r.data),r.data&&r.data.result===!0?(p.value={visible:!1,row:null},_.dialog({title:"ì„±ê³µ",message:"ìƒí’ˆì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"positive"}),b()):_.dialog({title:"ì‹¤íŒ¨",message:"ìƒí’ˆ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"})}catch(r){console.error("Delete product error:",r),_.dialog({title:"ì˜¤ë¥˜",message:"ìƒí’ˆ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"})}finally{N.value=!1}}}return k({seq:60,name:120,code:90,desc:180,url:180,image:70,price:80,actions:100}),(r,o)=>{const m=Ze,s=Ne,d=lt,C=tt,q=ot,L=et,w=$e,U=Me,$=je,M=Le,g=Ee,A=Be,V=Ke,G=Re,Q=at;return j(),Y(V,{padding:""},{default:a(()=>[n("div",rt,[n("div",it,[t(m,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=l=>f.value=l),options:c.value,label:"ì¹´í…Œê³ ë¦¬",dense:"",outlined:"",style:{width:"160px","min-width":"120px","margin-right":"12px"},"emit-value":"","map-options":""},null,8,["modelValue","options"]),t(s,{color:"primary",label:"ìƒí’ˆ ì¶”ê°€",onClick:P,class:"q-ml-sm",unelevated:"",rounded:"",icon:"add"})])]),t(L,{rows:O.value,columns:I,"row-key":"code",flat:"",bordered:"",class:"q-mb-md shadow-1 resizable-table","table-col-resize":!0,pagination:h.value,"rows-per-page-options":[10,20,50,100]},{"body-cell-num":a(l=>[t(d,{align:"center"},{default:a(()=>[T(u(l.rowIndex+1),1)]),_:2},1024)]),"body-cell-category":a(l=>[t(d,{align:"center"},{default:a(()=>[t(C,{color:"primary",outline:""},{default:a(()=>[T(u(l.row.category),1)]),_:2},1024)]),_:2},1024)]),"body-cell-aliProductId":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,null,{default:a(()=>[T(u(l.row.aliProductId),1)]),_:2},1024),n("span",nt,u(l.row.aliProductId),1)]),_:2},1024)]),"body-cell-name":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,null,{default:a(()=>[T(u(l.row.name),1)]),_:2},1024),n("span",st,u(l.row.name),1)]),_:2},1024)]),"body-cell-code":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,null,{default:a(()=>[T(u(l.row.code),1)]),_:2},1024),n("span",dt,u(l.row.code),1)]),_:2},1024)]),"body-cell-desc":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,null,{default:a(()=>[T(u(l.row.desc),1)]),_:2},1024),n("span",ct,u(l.row.desc),1)]),_:2},1024)]),"body-cell-url":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,null,{default:a(()=>[T(u(l.row.url),1)]),_:2},1024),n("a",{href:l.row.url,target:"_blank",style:{color:"#1976d2","text-decoration":"underline",cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"180px",display:"inline-block"}},u(l.row.url),9,ut)]),_:2},1024)]),"body-cell-promotionUrl":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,null,{default:a(()=>[T(u(l.row.promotionUrl),1)]),_:2},1024),n("a",{href:l.row.promotionUrl,target:"_blank",style:{color:"#1976d2","text-decoration":"underline",cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"180px",display:"inline-block"}},u(l.row.promotionUrl),9,mt)]),_:2},1024)]),"body-cell-image":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,{anchor:"top middle",self:"bottom middle"},{default:a(()=>[n("img",{src:l.row.image,style:{"max-width":"200px","max-height":"200px","border-radius":"8px"}},null,8,ft)]),_:2},1024),n("img",{src:l.row.image,style:{width:"40px",height:"40px","object-fit":"cover","border-radius":"6px",cursor:"pointer",border:"1px solid #eee"}},null,8,vt)]),_:2},1024)]),"body-cell-price":a(l=>[t(d,{align:"center"},{default:a(()=>[n("span",null,u(l.row.price),1)]),_:2},1024)]),"body-cell-actions":a(l=>[t(d,{align:"center"},{default:a(()=>[t(s,{size:"sm",color:"primary",flat:"",icon:"edit",onClick:_e=>oe(l.row),round:"",dense:""},null,8,["onClick"]),t(s,{size:"sm",color:"negative",flat:"",icon:"delete",onClick:_e=>D(l.row),round:"",dense:""},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows","pagination"]),t(g,{modelValue:e.value.visible,"onUpdate:modelValue":o[8]||(o[8]=l=>e.value.visible=l)},{default:a(()=>[t(M,{style:{"min-width":"350px","max-width":"90vw"}},{default:a(()=>[t(w,null,{default:a(()=>[n("div",gt,u(e.value.mode==="add"?"ìƒí’ˆ ì¶”ê°€":"ìƒí’ˆ ìˆ˜ì •"),1)]),_:1}),t(w,null,{default:a(()=>[t(m,{modelValue:e.value.form.category,"onUpdate:modelValue":o[1]||(o[1]=l=>e.value.form.category=l),options:c.value.filter(l=>l.value!=="ì „ì²´"),label:"ì¹´í…Œê³ ë¦¬",dense:"",outlined:"",class:"q-mb-sm","emit-value":"","map-options":""},null,8,["modelValue","options"]),t(U,{modelValue:e.value.form.url,"onUpdate:modelValue":o[2]||(o[2]=l=>e.value.form.url=l),label:"ìƒí’ˆ URL",dense:"",outlined:"",class:"q-mb-sm",autofocus:""},null,8,["modelValue"]),t(U,{modelValue:e.value.form.name,"onUpdate:modelValue":o[3]||(o[3]=l=>e.value.form.name=l),label:"ìƒí’ˆëª…",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"]),t(s,{color:"primary",label:"ìƒí’ˆ ì •ë³´ ê°€ì ¸ì˜¤ê¸°",class:"q-mb-md",onClick:J,unelevated:""}),e.value.infoVisible?(j(),ce("div",pt,[n("div",yt,[n("div",_t,[e.value.form.image?(j(),Y(q,{key:0},{default:a(()=>[n("img",{src:e.value.form.image,style:{width:"220px",height:"220px","object-fit":"contain","border-radius":"12px",border:"1px solid #eee",background:"#fff"}},null,8,bt)]),_:1})):z("",!0),e.value.form.image?F((j(),ce("img",{key:1,src:e.value.form.image,style:{width:"60px",height:"60px","object-fit":"cover","border-radius":"8px",border:"1px solid #eee",cursor:"pointer"}},null,8,ht)),[[G]]):z("",!0)])]),t(U,{modelValue:e.value.form.code,"onUpdate:modelValue":o[4]||(o[4]=l=>e.value.form.code=l),label:"ìƒí’ˆ ë²ˆí˜¸",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"]),t(U,{modelValue:e.value.form.desc,"onUpdate:modelValue":o[5]||(o[5]=l=>e.value.form.desc=l),label:"ìƒí’ˆ ì„¤ëª…",dense:"",outlined:"",class:"q-mb-sm",type:"textarea",autogrow:""},null,8,["modelValue"]),t(U,{modelValue:e.value.form.price,"onUpdate:modelValue":o[6]||(o[6]=l=>e.value.form.price=l),label:"ìƒí’ˆ ê°€ê²©",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"]),t(U,{modelValue:e.value.form.affiliateUrl,"onUpdate:modelValue":o[7]||(o[7]=l=>e.value.form.affiliateUrl=l),label:"ìƒí’ˆ ì œíœ´ URL",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"])])):z("",!0)]),_:1}),t($,{align:"center",class:"q-gutter-sm q-mt-sm q-mb-md"},{default:a(()=>[F(t(s,{color:"grey-5","text-color":"dark",label:"ì·¨ì†Œ",rounded:"",unelevated:"",class:"q-px-lg"},null,512),[[Q]]),t(s,{color:"primary",label:e.value.mode==="add"?"ì¶”ê°€":"ìˆ˜ì •",onClick:Z,rounded:"",unelevated:"",class:"q-px-lg"},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(g,{modelValue:x.value.visible,"onUpdate:modelValue":o[9]||(o[9]=l=>x.value.visible=l)},{default:a(()=>[t(M,null,{default:a(()=>[t(w,{class:"row items-center justify-center"},{default:a(()=>[t(A,{name:"help",color:"primary",class:"q-mr-sm",size:"sm"}),n("span",wt,u(x.value.mode==="add"?"ìƒí’ˆì„ ì¶”ê°€":"ìƒí’ˆì„ ìˆ˜ì •")+" í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",1)]),_:1}),t($,{align:"center",class:"q-gutter-sm q-mb-md"},{default:a(()=>[F(t(s,{color:"grey-5","text-color":"dark",label:"ì·¨ì†Œ",rounded:"",unelevated:"",class:"q-px-lg"},null,512),[[Q]]),t(s,{color:"primary",label:"í™•ì¸",onClick:ee,rounded:"",unelevated:"",class:"q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(g,{modelValue:v.value.visible,"onUpdate:modelValue":o[11]||(o[11]=l=>v.value.visible=l)},{default:a(()=>[t(M,{style:{"min-width":"400px","max-width":"90vw"}},{default:a(()=>[t(w,null,{default:a(()=>[n("div",xt,[t(A,{name:"delete",color:"negative",class:"q-mr-sm"}),o[13]||(o[13]=T(" ìƒí’ˆ ì‚­ì œ í™•ì¸ "))])]),_:1}),v.value.row?(j(),Y(w,{key:0},{default:a(()=>[o[19]||(o[19]=n("div",{class:"text-subtitle2 q-mb-md"},"ë‹¤ìŒ ìƒí’ˆì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?",-1)),n("div",qt,[n("div",It,[n("img",{src:v.value.row.image,style:{width:"100px",height:"100px","object-fit":"cover","border-radius":"8px",border:"1px solid #eee"},onError:o[10]||(o[10]=l=>l.target.src="https://via.placeholder.com/100x100?text=No+Image")},null,40,kt)]),n("div",Pt,[n("div",Ct,[n("div",Ut,[n("div",Vt,u(v.value.row.name),1)]),n("div",Tt,[o[14]||(o[14]=n("div",{class:"text-caption text-grey-6"},"ì¹´í…Œê³ ë¦¬",-1)),n("div",Ot,u(v.value.row.category),1)]),n("div",St,[o[15]||(o[15]=n("div",{class:"text-caption text-grey-6"},"ìƒí’ˆ ì½”ë“œ",-1)),n("div",Dt,u(v.value.row.code),1)]),n("div",At,[o[16]||(o[16]=n("div",{class:"text-caption text-grey-6"},"ê°€ê²©",-1)),n("div",Nt,u(v.value.row.price),1)]),n("div",Et,[o[17]||(o[17]=n("div",{class:"text-caption text-grey-6"},"ìƒí’ˆ ì„¤ëª…",-1)),n("div",Lt,u(v.value.row.desc),1)]),n("div",$t,[o[18]||(o[18]=n("div",{class:"text-caption text-grey-6"},"í”„ë¡œëª¨ì…˜ URL",-1)),n("div",Mt,[n("a",{href:v.value.row.promotionUrl,target:"_blank",style:{color:"#1976d2","text-decoration":"underline"}},u(v.value.row.promotionUrl),9,Rt)])])])])])]),_:1,__:[19]})):z("",!0),t($,{align:"right",class:"q-gutter-sm q-pa-md"},{default:a(()=>[F(t(s,{color:"grey-5","text-color":"dark",label:"ì·¨ì†Œ",rounded:"",unelevated:"",class:"q-px-lg"},null,512),[[Q]]),t(s,{color:"negative",label:"ì‚­ì œ",onClick:le,rounded:"",unelevated:"",class:"q-px-lg",loading:N.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(g,{modelValue:p.value.visible,"onUpdate:modelValue":o[12]||(o[12]=l=>p.value.visible=l)},{default:a(()=>[t(M,null,{default:a(()=>[t(w,{class:"row items-center justify-center"},{default:a(()=>[t(A,{name:"delete",color:"negative",class:"q-mr-sm",size:"sm"}),o[20]||(o[20]=n("span",{class:"text-subtitle1"},"ì •ë§ë¡œ ì´ ìƒí’ˆì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?",-1))]),_:1,__:[20]}),p.value.row?(j(),Y(w,{key:0,class:"text-center"},{default:a(()=>[n("div",jt,u(p.value.row.name),1),n("div",Bt,"ì¹´í…Œê³ ë¦¬: "+u(p.value.row.category),1),n("div",Ht,"Ali ìƒí’ˆ ID: "+u(p.value.row.aliProductId),1),n("div",zt,"ìƒí’ˆ ì½”ë“œ: "+u(p.value.row.code),1)]),_:1})):z("",!0),t($,{align:"center",class:"q-gutter-sm q-mb-md"},{default:a(()=>[F(t(s,{color:"grey-5","text-color":"dark",label:"ì·¨ì†Œ",rounded:"",unelevated:"",class:"q-px-lg"},null,512),[[Q]]),t(s,{color:"negative",label:"ì‚­ì œ",onClick:W,rounded:"",unelevated:"",class:"q-px-lg",loading:N.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},oo=Fe(Ft,[["__scopeId","data-v-639a25cc"]]);export{oo as default};
