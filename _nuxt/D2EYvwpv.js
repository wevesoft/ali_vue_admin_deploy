import{V as pe,$ as ae,ap as he,aq as we,ar as xe,X as _e,r as k,k as A,as as qe,at as Ie,a0 as ke,au as Pe,av as Ce,a6 as re,e as ne,aw as se,ax as de,ay as Ve,h as Y,a1 as Ue,Z as ie,az as Te,aA as Oe,aB as Se,aC as De,aD as Ae,M as G,C as a,L as $,aa as Ne,y as M,z as n,B as t,Q as Ee,A as u,D as U,al as Le,_ as $e,N as Me,x as ce,T as B,O as Re,aE as H,aF as je,P as Be,S as He,a9 as ze}from"./CtT8G-vu.js";import{u as Fe}from"./BDuZpdYL.js";import{_ as We}from"./DlAUqK2U.js";import{_ as Ke}from"./1rwEddW2.js";import{v as Qe,a as ue,u as Ge,p as me,b as Ye,c as Xe,d as Ze,r as fe,s as Je,_ as et}from"./B4jxj-7a.js";import{_ as tt}from"./C8Niq5tq.js";import{c as ve}from"./j7gZBxNS.js";import{_ as ot}from"./23MZJI01.js";import"./DVkPUkwj.js";import"./Dw_yEc4t.js";import"./CoaQEihs.js";import"./WN522PLG.js";const lt=pe({name:"QTooltip",inheritAttrs:!1,props:{...Ge,...xe,...ae,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...ae.transitionShow,default:"jump-down"},transitionHide:{...ae.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ue},self:{type:String,default:"top middle",validator:ue},offset:{type:Array,default:()=>[14,14],validator:Qe},scrollTarget:we,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...he],setup(i,{slots:c,emit:f,attrs:I}){let b,_;const T=_e(),{proxy:{$q:h}}=T,e=k(null),v=k(!1),x=A(()=>me(i.anchor,h.lang.rtl)),p=A(()=>me(i.self,h.lang.rtl)),N=A(()=>i.persistent!==!0),{registerTick:y,removeTick:X}=qe(),{registerTimeout:P}=Ie(),{transitionProps:Z,transitionStyle:J}=ke(i),{localScrollTarget:z,changeScrollEvent:ee,unconfigureScrollTarget:te}=Ye(i,w),{anchorEl:C,canShow:oe,anchorEvents:D}=Xe({showing:v,configureAnchorEl:E}),{show:le,hide:R}=Pe({showing:v,canShow:oe,handleShow:o,handleHide:m,hideOnRouteChange:N,processOnMount:!0});Object.assign(D,{delayShow:j,delayHide:q});const{showPortal:F,hidePortal:W,renderPortal:r}=Ce(T,e,L,"tooltip");if(h.platform.is.mobile===!0){const g={anchorEl:C,innerRef:e,onClickOutside(V){return R(V),V.target.classList.contains("q-dialog__backdrop")&&Te(V),!0}},S=A(()=>i.modelValue===null&&i.persistent!==!0&&v.value===!0);re(S,V=>{(V===!0?Ze:fe)(g)}),ne(()=>{fe(g)})}function o(g){F(),y(()=>{_=new MutationObserver(()=>d()),_.observe(e.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),d(),w()}),b===void 0&&(b=re(()=>h.screen.width+"|"+h.screen.height+"|"+i.self+"|"+i.anchor+"|"+h.lang.rtl,d)),P(()=>{F(!0),f("show",g)},i.transitionDuration)}function m(g){X(),W(),s(),P(()=>{W(!0),f("hide",g)},i.transitionDuration)}function s(){_!==void 0&&(_.disconnect(),_=void 0),b!==void 0&&(b(),b=void 0),te(),se(D,"tooltipTemp")}function d(){Je({targetEl:e.value,offset:i.offset,anchorEl:C.value,anchorOrigin:x.value,selfOrigin:p.value,maxHeight:i.maxHeight,maxWidth:i.maxWidth})}function j(g){if(h.platform.is.mobile===!0){ve(),document.body.classList.add("non-selectable");const S=C.value,V=["touchmove","touchcancel","touchend","click"].map(K=>[S,K,"delayHide","passiveCapture"]);de(D,"tooltipTemp",V)}P(()=>{le(g)},i.delay)}function q(g){h.platform.is.mobile===!0&&(se(D,"tooltipTemp"),ve(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),P(()=>{R(g)},i.hideDelay)}function E(){if(i.noParentEvent===!0||C.value===null)return;const g=h.platform.is.mobile===!0?[[C.value,"touchstart","delayShow","passive"]]:[[C.value,"mouseenter","delayShow","passive"],[C.value,"mouseleave","delayHide","passive"]];de(D,"anchor",g)}function w(){if(C.value!==null||i.scrollTarget!==void 0){z.value=Ve(C.value,i.scrollTarget);const g=i.noParentEvent===!0?d:R;ee(z.value,g)}}function O(){return v.value===!0?Y("div",{...I,ref:e,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",I.class],style:[I.style,J.value],role:"tooltip"},ie(c.default)):null}function L(){return Y(Ue,Z.value,O)}return ne(s),Object.assign(T.proxy,{updatePosition:d}),r}}),at=pe({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(i,{slots:c}){const f=_e(),I=A(()=>"q-td"+(i.autoWidth===!0?" q-table--col-auto-width":"")+(i.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(i.props===void 0)return Y("td",{class:I.value},ie(c.default));const b=f.vnode.key,_=(i.props.colsMap!==void 0?i.props.colsMap[b]:null)||i.props.col;if(_===void 0)return;const{row:T}=i.props;return Y("td",{class:I.value+_.__tdClass(T),style:_.__tdStyle(T)},ie(c.default))}}});function ge(i){if(i===!1)return 0;if(i===!0||i===void 0)return 1;const c=parseInt(i,10);return isNaN(c)?0:c}const rt=Oe({name:"close-popup",beforeMount(i,{value:c}){const f={depth:ge(c),handler(I){f.depth!==0&&setTimeout(()=>{const b=De(i);b!==void 0&&Ae(b,I,f.depth)})},handlerKey(I){Se(I,13)===!0&&f.handler(I)}};i.__qclosepopup=f,i.addEventListener("click",f.handler),i.addEventListener("keyup",f.handlerKey)},updated(i,{value:c,oldValue:f}){c!==f&&(i.__qclosepopup.depth=ge(c))},beforeUnmount(i){const c=i.__qclosepopup;i.removeEventListener("click",c.handler),i.removeEventListener("keyup",c.handlerKey),delete i.__qclosepopup}}),it={class:"q-mb-md row items-center justify-between"},nt={class:"row items-center"},st={style:{cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"120px",display:"inline-block"}},dt={style:{cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"120px",display:"inline-block"}},ct={style:{cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"90px",display:"inline-block"}},ut={style:{cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"180px",display:"inline-block"}},mt=["href"],ft=["href"],vt=["src"],gt=["src"],pt={class:"text-h6"},_t={key:0},yt={class:"row q-gutter-md items-center q-mb-md"},bt={class:"col-auto"},ht=["src"],wt=["src"],xt={class:"text-subtitle1"},qt={class:"text-h6 text-negative"},It={class:"row q-gutter-md"},kt={class:"col-3"},Pt=["src"],Ct={class:"col-9"},Vt={class:"row q-gutter-y-sm"},Ut={class:"col-12"},Tt={class:"text-weight-bold text-h6"},Ot={class:"col-6"},St={class:"text-body2"},Dt={class:"col-6"},At={class:"text-body2"},Nt={class:"col-12"},Et={class:"text-body2 text-weight-bold text-primary"},Lt={class:"col-12"},$t={class:"text-body2",style:{"max-height":"60px",overflow:"hidden","text-overflow":"ellipsis"}},Mt={class:"col-12"},Rt={class:"text-body2",style:{"max-height":"60px",overflow:"hidden","text-overflow":"ellipsis"}},jt=["href"],Bt={class:"text-weight-bold text-h6 q-mb-sm"},Ht={class:"text-caption text-grey-6"},zt={class:"text-caption text-grey-6"},Ft={class:"text-caption text-grey-6"},Wt={__name:"recommend-products",setup(i){const c=k([{label:"ì „ì²´",value:"ì „ì²´",categoryId:0,order:0}]),f=k("ì „ì²´"),I=[{name:"num",label:"ë²ˆí˜¸",field:r=>"",align:"center",sortable:!1,style:"min-width:60px;"},{name:"category",label:"ì¹´í…Œê³ ë¦¬",field:"category",align:"center",sortable:!0,style:"min-width:100px;"},{name:"aliProductId",label:"Ali ìƒí’ˆ ID",field:"aliProductId",align:"center",sortable:!0,style:"min-width:120px;"},{name:"name",label:"ìƒí’ˆ ì´ë¦„",field:"name",align:"center",sortable:!0,style:"min-width:120px;"},{name:"code",label:"ìƒí’ˆ ë²ˆí˜¸",field:"code",align:"center",sortable:!0,style:"min-width:90px;"},{name:"desc",label:"ìƒí’ˆ ì„¤ëª…",field:"desc",align:"center",style:"min-width:180px;"},{name:"url",label:"ìƒí’ˆ URL",field:"url",align:"center",style:"min-width:180px;"},{name:"promotionUrl",label:"í”„ë¡œëª¨ì…˜ URL",field:"promotionUrl",align:"center",style:"min-width:180px;"},{name:"image",label:"ìƒí’ˆ ì´ë¯¸ì§€",field:"image",align:"center",style:"min-width:70px;"},{name:"price",label:"ê°€ê²©",field:"price",align:"center",sortable:!0,style:"min-width:80px;"},{name:"actions",label:"ê´€ë¦¬",field:"actions",align:"center"}];async function b(){try{const r=c.value.find(d=>d.value===f.value),m={categoryId:r?r.categoryId:0,limit:h.value.rowsPerPage,offset:(h.value.page-1)*h.value.rowsPerPage},s=await $.post(`${P.value}/recommended/product/list`,m,{withCredentials:!0});Array.isArray(s.data)?(console.log("Fetched products:",s.data),_.value=s.data.map(d=>{console.log("ðŸ” Product Category Mapping:",{productCategoryId:d.categoryId,productCategoryIdType:typeof d.categoryId,convertedCategoryId:Number(d.categoryId),availableCategories:c.value.map(w=>({categoryId:w.categoryId,categoryIdType:typeof w.categoryId,label:w.label}))});const j=Number(d.categoryId),q=c.value.find(w=>w.categoryId===j),E=q?q.label:"ê¸°íƒ€";return console.log("ðŸ“‹ Category Mapping Result:",{productCategoryId:d.categoryId,convertedCategoryId:Number(d.categoryId),foundCategoryOption:q,finalCategoryLabel:E}),{seq:d.seq,category:E,aliProductId:d.aliProductId||"",name:d.productName,code:d.productId,desc:d.productDesc,url:d.productUrl,promotionUrl:d.promotionUrl,image:d.imageUrl,price:`${d.price.toLocaleString()}ì›`}})):(console.error("Invalid response format:",s.data),_.value=[])}catch(r){console.error("Fetch products error:",r),y.notify({type:"negative",message:"ìƒí’ˆ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."}),_.value=[]}}const _=k([]),T=A(()=>f.value==="ì „ì²´"?_.value:_.value.filter(r=>r.category===f.value)),h=k({page:1,rowsPerPage:20}),e=k({visible:!1,mode:"add",form:{seq:null,name:"",code:"",desc:"",url:"",image:"",price:"",affiliateUrl:""},infoVisible:!1}),v=k({visible:!1,row:null}),x=k({visible:!1,mode:"add"}),p=k({visible:!1,row:null}),N=k(!1),y=Ne(),X=Fe(),P=A(()=>X.apiBase.value||"http://localhost:8080");async function Z(){try{const r=await $.post(`${P.value}/recommended/category/list`,{},{withCredentials:!0});Array.isArray(r.data)&&(console.log("ðŸ“‚ Fetched Categories:",r.data),c.value=[{label:"ì „ì²´",value:"ì „ì²´",categoryId:0,order:0},...r.data.map(o=>({label:o.categoryName,value:o.categoryName,categoryId:Number(o.categoryId),order:o.order}))],console.log("âœ… Final CATEGORY_OPTIONS:",c.value))}catch(r){console.log(r)}}Z(),b(),re([f,()=>h.value.page,()=>h.value.rowsPerPage],()=>{b()});function J(){if(!e.value.form.url){y.notify({type:"warning",message:"ìƒí’ˆ URLì„ ìž…ë ¥í•˜ì„¸ìš”."});return}const r=c.value.find(m=>m.value===e.value.form.category),o=r?r.categoryId:0;$.post(`${P.value}/recommended/get/product/detail`,{categoryName:e.value.form.category,categoryId:o,productUrl:e.value.form.url,productName:e.value.form.name},{withCredentials:!0}).then(m=>{if(console.log(m.data),m.data&&m.data.result===!0){const s=m.data;e.value.form.image=s.productMainImageUrl,e.value.form.code=s.productId,e.value.form.desc=s.productTitle,e.value.form.price=s.targetSalePrice,e.value.form.affiliateUrl=s.promotionLink,e.value.infoVisible=!0}else y.dialog({title:"ì•Œë¦¼",message:"ìƒí’ˆ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"}),e.value.infoVisible=!1}).catch(()=>{y.dialog({title:"ì•Œë¦¼",message:"ìƒí’ˆ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"}),e.value.infoVisible=!1})}function z(){if(e.value.mode==="add"){if(!e.value.infoVisible){y.notify({type:"warning",message:"ìƒí’ˆ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì„¸ìš”."});return}x.value={visible:!0,mode:"add"}}else{if(!e.value.infoVisible){y.notify({type:"warning",message:"ìƒí’ˆ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì„¸ìš”."});return}x.value={visible:!0,mode:"edit"}}}function ee(){const r=c.value.find(s=>s.value===e.value.form.category),o=r?r.categoryId:0,m={categoryName:e.value.form.category,categoryId:o,productName:e.value.form.name||`ìƒí’ˆ${_.value.length+1}`,productId:e.value.form.code,productdesc:e.value.form.desc,productUrl:e.value.form.url,imageUrl:e.value.form.image,price:e.value.form.price,affiliateUrl:e.value.form.affiliateUrl};$.post(`${P.value}/recommended/add/product`,m,{withCredentials:!0}).then(s=>{s.data&&s.data.result===!0?(y.dialog({title:"ì„±ê³µ",message:"ìƒí’ˆì´ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"primary"}),e.value={visible:!1,mode:"add",form:{seq:null,name:"",code:"",desc:"",url:"",image:"",price:"",affiliateUrl:""},infoVisible:!1},x.value={visible:!1,mode:"add"},b()):y.dialog({title:"ì‹¤íŒ¨",message:"ìƒí’ˆ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"})}).catch(()=>{y.dialog({title:"ì‹¤íŒ¨",message:"ìƒí’ˆ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"})})}function te(){console.log("ðŸ”§ Confirm Action:",x.value.mode),x.value.mode==="add"?ee():x.value.mode==="edit"&&C()}function C(){console.log("ðŸ”§ Modify Product Called"),console.log("ðŸ“‹ Dialog Form:",e.value.form);const r=c.value.find(s=>s.value===e.value.form.category),o=r?r.categoryId:0,m={categoryName:e.value.form.category,categoryId:o,productName:e.value.form.name||`ìƒí’ˆ${_.value.length+1}`,productId:e.value.form.code,productdesc:e.value.form.desc,productUrl:e.value.form.url,imageUrl:e.value.form.image,price:e.value.form.price,affiliateUrl:e.value.form.affiliateUrl};console.log("ðŸš€ Sending Modify Request:",m),$.post(`${P.value}/recommended/modify/product`,m,{withCredentials:!0}).then(s=>{s.data&&s.data.result===!0?(y.dialog({title:"ì„±ê³µ",message:"ìƒí’ˆì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"primary"}),e.value={visible:!1,mode:"add",form:{seq:null,name:"",code:"",desc:"",url:"",image:"",price:"",affiliateUrl:""},infoVisible:!1},x.value={visible:!1,mode:"add"},b()):y.dialog({title:"ì‹¤íŒ¨",message:"ìƒí’ˆ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"})}).catch(()=>{y.dialog({title:"ì‹¤íŒ¨",message:"ìƒí’ˆ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"})})}function oe(){e.value={visible:!0,mode:"add",form:{seq:null,name:"",code:"",desc:"",url:"",image:"",price:"",affiliateUrl:""},infoVisible:!1},x.value={visible:!1,mode:"add"}}function D(r){e.value={visible:!0,mode:"edit",form:{seq:r.seq,category:r.category,name:r.name,code:r.code,desc:r.desc,url:r.url,image:r.image,price:r.price,affiliateUrl:r.promotionUrl||r.affiliateUrl||""},infoVisible:!0},x.value={visible:!1,mode:"edit"}}function le(r){v.value={visible:!0,row:r},p.value={visible:!1,row:null}}function R(){v.value.row&&(v.value.visible=!1,ze(()=>{p.value={visible:!0,row:v.value.row}}))}function F(r){console.log("ðŸ” Getting categoryId for:",r),console.log("ðŸ“‹ Available categories:",c.value);const o=c.value.find(s=>s.label===r),m=o?o.categoryId:0;return console.log("âœ… Found categoryId:",m,"for category:",r),m}async function W(){if(p.value.row){N.value=!0;try{console.log("ðŸ—‘ï¸ Executing Delete Product:",p.value.row);const r=await $.post(`${P.value}/recommended/remove/product`,{productId:p.value.row.code,productName:p.value.row.name,aliProductId:p.value.row.aliProductId,categoryId:F(p.value.row.category)},{withCredentials:!0});console.log("ðŸ—‘ï¸ Delete Response:",r.data),r.data&&r.data.result===!0?(p.value={visible:!1,row:null},y.dialog({title:"ì„±ê³µ",message:"ìƒí’ˆì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"positive"}),b()):y.dialog({title:"ì‹¤íŒ¨",message:"ìƒí’ˆ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"})}catch(r){console.error("Delete product error:",r),y.dialog({title:"ì˜¤ë¥˜",message:"ìƒí’ˆ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",ok:"í™•ì¸",color:"negative"})}finally{N.value=!1}}}return k({seq:60,name:120,code:90,desc:180,url:180,image:70,price:80,actions:100}),(r,o)=>{const m=et,s=Ee,d=at,j=ot,q=lt,E=tt,w=Me,O=Re,L=Be,g=$e,S=Le,V=He,K=Ke,ye=je,Q=rt;return M(),G(K,{padding:""},{default:a(()=>[n("div",it,[n("div",nt,[t(m,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=l=>f.value=l),options:c.value,label:"ì¹´í…Œê³ ë¦¬",dense:"",outlined:"",style:{width:"160px","min-width":"120px","margin-right":"12px"},"emit-value":"","map-options":""},null,8,["modelValue","options"]),t(s,{color:"primary",label:"ìƒí’ˆ ì¶”ê°€",onClick:oe,class:"q-ml-sm",unelevated:"",rounded:"",icon:"add"})])]),t(E,{rows:T.value,columns:I,"row-key":"code",flat:"",bordered:"",class:"q-mb-md shadow-1 resizable-table","table-col-resize":!0,pagination:h.value,"rows-per-page-options":[10,20,50,100]},{"body-cell-num":a(l=>[t(d,{align:"center"},{default:a(()=>[U(u(l.rowIndex+1),1)]),_:2},1024)]),"body-cell-category":a(l=>[t(d,{align:"center"},{default:a(()=>[t(j,{color:"primary",outline:""},{default:a(()=>[U(u(l.row.category),1)]),_:2},1024)]),_:2},1024)]),"body-cell-aliProductId":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,null,{default:a(()=>[U(u(l.row.aliProductId),1)]),_:2},1024),n("span",st,u(l.row.aliProductId),1)]),_:2},1024)]),"body-cell-name":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,null,{default:a(()=>[U(u(l.row.name),1)]),_:2},1024),n("span",dt,u(l.row.name),1)]),_:2},1024)]),"body-cell-code":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,null,{default:a(()=>[U(u(l.row.code),1)]),_:2},1024),n("span",ct,u(l.row.code),1)]),_:2},1024)]),"body-cell-desc":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,null,{default:a(()=>[U(u(l.row.desc),1)]),_:2},1024),n("span",ut,u(l.row.desc),1)]),_:2},1024)]),"body-cell-url":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,null,{default:a(()=>[U(u(l.row.url),1)]),_:2},1024),n("a",{href:l.row.url,target:"_blank",style:{color:"#1976d2","text-decoration":"underline",cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"180px",display:"inline-block"}},u(l.row.url),9,mt)]),_:2},1024)]),"body-cell-promotionUrl":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,null,{default:a(()=>[U(u(l.row.promotionUrl),1)]),_:2},1024),n("a",{href:l.row.promotionUrl,target:"_blank",style:{color:"#1976d2","text-decoration":"underline",cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"180px",display:"inline-block"}},u(l.row.promotionUrl),9,ft)]),_:2},1024)]),"body-cell-image":a(l=>[t(d,{align:"center"},{default:a(()=>[t(q,{anchor:"top middle",self:"bottom middle"},{default:a(()=>[n("img",{src:l.row.image,style:{"max-width":"200px","max-height":"200px","border-radius":"8px"}},null,8,vt)]),_:2},1024),n("img",{src:l.row.image,style:{width:"40px",height:"40px","object-fit":"cover","border-radius":"6px",cursor:"pointer",border:"1px solid #eee"}},null,8,gt)]),_:2},1024)]),"body-cell-price":a(l=>[t(d,{align:"center"},{default:a(()=>[n("span",null,u(l.row.price),1)]),_:2},1024)]),"body-cell-actions":a(l=>[t(d,{align:"center"},{default:a(()=>[t(s,{size:"sm",color:"primary",flat:"",icon:"edit",onClick:be=>D(l.row),round:"",dense:""},null,8,["onClick"]),t(s,{size:"sm",color:"negative",flat:"",icon:"delete",onClick:be=>le(l.row),round:"",dense:""},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows","pagination"]),t(S,{modelValue:e.value.visible,"onUpdate:modelValue":o[8]||(o[8]=l=>e.value.visible=l)},{default:a(()=>[t(g,{style:{"min-width":"350px","max-width":"90vw"}},{default:a(()=>[t(w,null,{default:a(()=>[n("div",pt,u(e.value.mode==="add"?"ìƒí’ˆ ì¶”ê°€":"ìƒí’ˆ ìˆ˜ì •"),1)]),_:1}),t(w,null,{default:a(()=>[t(m,{modelValue:e.value.form.category,"onUpdate:modelValue":o[1]||(o[1]=l=>e.value.form.category=l),options:c.value.filter(l=>l.value!=="ì „ì²´"),label:"ì¹´í…Œê³ ë¦¬",dense:"",outlined:"",class:"q-mb-sm","emit-value":"","map-options":""},null,8,["modelValue","options"]),t(O,{modelValue:e.value.form.url,"onUpdate:modelValue":o[2]||(o[2]=l=>e.value.form.url=l),label:"ìƒí’ˆ URL",dense:"",outlined:"",class:"q-mb-sm",autofocus:""},null,8,["modelValue"]),t(O,{modelValue:e.value.form.name,"onUpdate:modelValue":o[3]||(o[3]=l=>e.value.form.name=l),label:"ìƒí’ˆëª…",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"]),t(s,{color:"primary",label:"ìƒí’ˆ ì •ë³´ ê°€ì ¸ì˜¤ê¸°",class:"q-mb-md",onClick:J,unelevated:""}),e.value.infoVisible?(M(),ce("div",_t,[n("div",yt,[n("div",bt,[e.value.form.image?(M(),G(q,{key:0},{default:a(()=>[n("img",{src:e.value.form.image,style:{width:"220px",height:"220px","object-fit":"contain","border-radius":"12px",border:"1px solid #eee",background:"#fff"}},null,8,ht)]),_:1})):B("",!0),e.value.form.image?H((M(),ce("img",{key:1,src:e.value.form.image,style:{width:"60px",height:"60px","object-fit":"cover","border-radius":"8px",border:"1px solid #eee",cursor:"pointer"}},null,8,wt)),[[ye]]):B("",!0)])]),t(O,{modelValue:e.value.form.code,"onUpdate:modelValue":o[4]||(o[4]=l=>e.value.form.code=l),label:"ìƒí’ˆ ë²ˆí˜¸",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"]),t(O,{modelValue:e.value.form.desc,"onUpdate:modelValue":o[5]||(o[5]=l=>e.value.form.desc=l),label:"ìƒí’ˆ ì„¤ëª…",dense:"",outlined:"",class:"q-mb-sm",type:"textarea",autogrow:""},null,8,["modelValue"]),t(O,{modelValue:e.value.form.price,"onUpdate:modelValue":o[6]||(o[6]=l=>e.value.form.price=l),label:"ìƒí’ˆ ê°€ê²©",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"]),t(O,{modelValue:e.value.form.affiliateUrl,"onUpdate:modelValue":o[7]||(o[7]=l=>e.value.form.affiliateUrl=l),label:"ìƒí’ˆ ì œíœ´ URL",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"])])):B("",!0)]),_:1}),t(L,{align:"center",class:"q-gutter-sm q-mt-sm q-mb-md"},{default:a(()=>[H(t(s,{color:"grey-5","text-color":"dark",label:"ì·¨ì†Œ",rounded:"",unelevated:"",class:"q-px-lg"},null,512),[[Q]]),t(s,{color:"primary",label:e.value.mode==="add"?"ì¶”ê°€":"ìˆ˜ì •",onClick:z,rounded:"",unelevated:"",class:"q-px-lg"},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(S,{modelValue:x.value.visible,"onUpdate:modelValue":o[9]||(o[9]=l=>x.value.visible=l)},{default:a(()=>[t(g,null,{default:a(()=>[t(w,{class:"row items-center justify-center"},{default:a(()=>[t(V,{name:"help",color:"primary",class:"q-mr-sm",size:"sm"}),n("span",xt,u(x.value.mode==="add"?"ìƒí’ˆì„ ì¶”ê°€":"ìƒí’ˆì„ ìˆ˜ì •")+" í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",1)]),_:1}),t(L,{align:"center",class:"q-gutter-sm q-mb-md"},{default:a(()=>[H(t(s,{color:"grey-5","text-color":"dark",label:"ì·¨ì†Œ",rounded:"",unelevated:"",class:"q-px-lg"},null,512),[[Q]]),t(s,{color:"primary",label:"í™•ì¸",onClick:te,rounded:"",unelevated:"",class:"q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(S,{modelValue:v.value.visible,"onUpdate:modelValue":o[11]||(o[11]=l=>v.value.visible=l)},{default:a(()=>[t(g,{style:{"min-width":"400px","max-width":"90vw"}},{default:a(()=>[t(w,null,{default:a(()=>[n("div",qt,[t(V,{name:"delete",color:"negative",class:"q-mr-sm"}),o[13]||(o[13]=U(" ìƒí’ˆ ì‚­ì œ í™•ì¸ "))])]),_:1}),v.value.row?(M(),G(w,{key:0},{default:a(()=>[o[19]||(o[19]=n("div",{class:"text-subtitle2 q-mb-md"},"ë‹¤ìŒ ìƒí’ˆì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?",-1)),n("div",It,[n("div",kt,[n("img",{src:v.value.row.image,style:{width:"100px",height:"100px","object-fit":"cover","border-radius":"8px",border:"1px solid #eee"},onError:o[10]||(o[10]=l=>l.target.src="https://via.placeholder.com/100x100?text=No+Image")},null,40,Pt)]),n("div",Ct,[n("div",Vt,[n("div",Ut,[n("div",Tt,u(v.value.row.name),1)]),n("div",Ot,[o[14]||(o[14]=n("div",{class:"text-caption text-grey-6"},"ì¹´í…Œê³ ë¦¬",-1)),n("div",St,u(v.value.row.category),1)]),n("div",Dt,[o[15]||(o[15]=n("div",{class:"text-caption text-grey-6"},"ìƒí’ˆ ì½”ë“œ",-1)),n("div",At,u(v.value.row.code),1)]),n("div",Nt,[o[16]||(o[16]=n("div",{class:"text-caption text-grey-6"},"ê°€ê²©",-1)),n("div",Et,u(v.value.row.price),1)]),n("div",Lt,[o[17]||(o[17]=n("div",{class:"text-caption text-grey-6"},"ìƒí’ˆ ì„¤ëª…",-1)),n("div",$t,u(v.value.row.desc),1)]),n("div",Mt,[o[18]||(o[18]=n("div",{class:"text-caption text-grey-6"},"í”„ë¡œëª¨ì…˜ URL",-1)),n("div",Rt,[n("a",{href:v.value.row.promotionUrl,target:"_blank",style:{color:"#1976d2","text-decoration":"underline"}},u(v.value.row.promotionUrl),9,jt)])])])])])]),_:1,__:[19]})):B("",!0),t(L,{align:"right",class:"q-gutter-sm q-pa-md"},{default:a(()=>[H(t(s,{color:"grey-5","text-color":"dark",label:"ì·¨ì†Œ",rounded:"",unelevated:"",class:"q-px-lg"},null,512),[[Q]]),t(s,{color:"negative",label:"ì‚­ì œ",onClick:R,rounded:"",unelevated:"",class:"q-px-lg",loading:N.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(S,{modelValue:p.value.visible,"onUpdate:modelValue":o[12]||(o[12]=l=>p.value.visible=l)},{default:a(()=>[t(g,null,{default:a(()=>[t(w,{class:"row items-center justify-center"},{default:a(()=>[t(V,{name:"delete",color:"negative",class:"q-mr-sm",size:"sm"}),o[20]||(o[20]=n("span",{class:"text-subtitle1"},"ì •ë§ë¡œ ì´ ìƒí’ˆì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?",-1))]),_:1,__:[20]}),p.value.row?(M(),G(w,{key:0,class:"text-center"},{default:a(()=>[n("div",Bt,u(p.value.row.name),1),n("div",Ht,"ì¹´í…Œê³ ë¦¬: "+u(p.value.row.category),1),n("div",zt,"Ali ìƒí’ˆ ID: "+u(p.value.row.aliProductId),1),n("div",Ft,"ìƒí’ˆ ì½”ë“œ: "+u(p.value.row.code),1)]),_:1})):B("",!0),t(L,{align:"center",class:"q-gutter-sm q-mb-md"},{default:a(()=>[H(t(s,{color:"grey-5","text-color":"dark",label:"ì·¨ì†Œ",rounded:"",unelevated:"",class:"q-px-lg"},null,512),[[Q]]),t(s,{color:"negative",label:"ì‚­ì œ",onClick:W,rounded:"",unelevated:"",class:"q-px-lg",loading:N.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},ro=We(Wt,[["__scopeId","data-v-33f4196d"]]);export{ro as default};
