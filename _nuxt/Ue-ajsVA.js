import{r as h,J as I,k as V,o as k,K as A,L as f,M as B,C as t,y as C,B as o,_ as G,z as s,N,O as $,P,Q as S,R as z,D as O}from"./Gwc9BvED.js";import{g as F,G as U,s as M}from"./CBC8_xwp.js";import"./BoN8Vdrn.js";import{u as R}from"./7RizGfdR.js";import{_ as T}from"./DlAUqK2U.js";import{_ as D,a as E}from"./wK3QA3WZ.js";import{_ as J}from"./CpORA2A-.js";const K={class:"row flex-center q-my-md"},Q={class:"divider-wrap"},W={class:"row items-center no-wrap"},j={class:"col",style:{"margin-left":"2px"}},H={class:"col"},X={__name:"login",setup(Y){const _=h(""),i=h(""),c=A(),r=I(),x=R(),u=V(()=>x.apiBase.value||"http://localhost:8080");k(async()=>{if(console.log("üîê Login page mounted"),r.isLoggedIn){console.log("‚úÖ Ïù¥ÎØ∏ Î°úÍ∑∏Ïù∏Îêú ÏÉÅÌÉú - ÎåÄÏãúÎ≥¥ÎìúÎ°ú Ïù¥Îèô"),c.push("/dashboard");return}try{console.log("üîê ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù ÏãúÏûë...");const n=await f.post(`${u.value}/token/validate`,null,{withCredentials:!0});console.log("üîê ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù Í≤∞Í≥º:",n.data),n.data.result===!0?(console.log("‚úÖ ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù ÏÑ±Í≥µ - ÎåÄÏãúÎ≥¥ÎìúÎ°ú Ïù¥Îèô"),r.setLoggedIn(),c.push("/dashboard")):(console.log("‚ùå ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù Ïã§Ìå® - Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄ Ïú†ÏßÄ"),r.setLoggedOut())}catch(n){console.log("‚ùå ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù Ïò§Î•ò:",n),r.setLoggedOut()}});const v=()=>{console.log("üîê Google Î°úÍ∑∏Ïù∏ ÏãúÏûë (Firebase Î∞©Ïãù)");const n=F(),e=new U;M(n,e).then(l=>{console.log("‚úÖ Firebase Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ:",l.user.email),l.user.getIdToken().then(d=>{console.log(`üåê ÏÑúÎ≤ÑÎ°ú ÌÜ†ÌÅ∞ Ï†ÑÏÜ° ÏãúÏûë ${u.value}`),f.post(`${u.value}/auth/google`,null,{headers:{Authorization:`Bearer ${d}`},withCredentials:!0}).then(a=>{console.log("‚úÖ ÏÑúÎ≤Ñ ÏùëÎãµ:",a.data),a.data.result===!0&&(r.setLoggedIn(),c.push("/dashboard"))}).catch(a=>{console.error("‚ùå ÏÑúÎ≤Ñ ÏöîÏ≤≠ Ïã§Ìå®:",a)})})}).catch(l=>{console.error("‚ùå Firebase Î°úÍ∑∏Ïù∏ Ïã§Ìå®:",l)})},b=()=>{_.value==="admin"&&i.value==="password"?(r.setLoggedIn(),c.push("/dashboard")):alert("Invalid credentials")};return(n,e)=>{const l=N,d=$,a=P,g=S,m=z,w=G,y=J,q=E,L=D;return C(),B(L,null,{default:t(()=>[o(q,null,{default:t(()=>[o(y,{class:"flex flex-center"},{default:t(()=>[o(w,{style:{width:"300px"}},{default:t(()=>[o(l,null,{default:t(()=>e[2]||(e[2]=[s("div",{class:"text-h6 text-center"},"Login",-1)])),_:1,__:[2]}),o(l,null,{default:t(()=>[o(d,{outlined:"",dense:"",modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=p=>_.value=p),label:"Username",class:"q-mb-md"},null,8,["modelValue"]),o(d,{outlined:"",dense:"",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=p=>i.value=p),label:"Password",type:"password"},null,8,["modelValue"]),o(a,{align:"center"}),o(g,{color:"primary",label:"Î°úÍ∑∏Ïù∏",onClick:b,class:"full-width q-mb-md",style:{height:"44px","font-size":"16px"}})]),_:1}),s("div",K,[s("div",Q,[s("div",W,[s("div",j,[o(m)]),e[3]||(e[3]=s("div",{class:"col-auto text-grey q-mx-sm",style:{"margin-top":"2px","margin-bottom":"2px"}},"SNS LOGIN",-1)),s("div",H,[o(m)])])])]),o(a,{align:"center"},{default:t(()=>[o(g,{class:"full-width google-btn",style:{background:"#fff",color:"#444",border:"1px solid #ddd",height:"44px","font-size":"16px"},onClick:v},{default:t(()=>e[4]||(e[4]=[s("img",{src:"https://developers.google.com/identity/images/g-logo.png",alt:"Google",style:{height:"24px","margin-right":"8px","vertical-align":"middle"}},null,-1),O(" Google Î°úÍ∑∏Ïù∏ ")])),_:1,__:[4]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},ao=T(X,[["__scopeId","data-v-63c06d47"]]);export{ao as default};
