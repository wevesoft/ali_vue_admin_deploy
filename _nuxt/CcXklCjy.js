import{r as f,J as I,k as V,o as k,q as _,K as x,L as A,C as t,M as B,y as C,B as o,_ as G,z as n,N,O as $,P,Q as S,R as z,D as O}from"./zCgx7rFC.js";import{g as F,G as T,s as U}from"./CBC8_xwp.js";import"./BoN8Vdrn.js";import{u as M}from"./DesUSakR.js";import{_ as R}from"./DlAUqK2U.js";import{_ as D,a as E}from"./C0F24OLD.js";import{_ as J}from"./B8b_u0x3.js";const K={class:"row flex-center q-my-md"},Q={class:"divider-wrap"},W={class:"row items-center no-wrap"},j={class:"col",style:{"margin-left":"2px"}},H={class:"col"},X={__name:"login",setup(Y){const c=f(""),i=f("");B();const r=I(),h=M(),u=V(()=>h.apiBase.value||"http://localhost:8080");k(async()=>{if(console.log("üîê Login page mounted"),r.isLoggedIn){console.log("‚úÖ Ïù¥ÎØ∏ Î°úÍ∑∏Ïù∏Îêú ÏÉÅÌÉú - ÎåÄÏãúÎ≥¥ÎìúÎ°ú Ïù¥Îèô"),_("/dashboard");return}try{console.log("üîê ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù ÏãúÏûë...");const s=await x.post(`${u.value}/token/validate`,null,{withCredentials:!0});console.log("üîê ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù Í≤∞Í≥º:",s.data),s.data.result===!0?(console.log("‚úÖ ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù ÏÑ±Í≥µ - ÎåÄÏãúÎ≥¥ÎìúÎ°ú Ïù¥Îèô"),r.setLoggedIn(),_("/dashboard")):(console.log("‚ùå ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù Ïã§Ìå® - Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄ Ïú†ÏßÄ"),r.setLoggedOut())}catch(s){console.log("‚ùå ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù Ïò§Î•ò:",s),r.setLoggedOut()}});const v=()=>{console.log("üîê Google Î°úÍ∑∏Ïù∏ ÏãúÏûë (Firebase Î∞©Ïãù)");const s=F(),e=new T;U(s,e).then(a=>{console.log("‚úÖ Firebase Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ:",a.user.email),a.user.getIdToken().then(d=>{console.log(`üåê ÏÑúÎ≤ÑÎ°ú ÌÜ†ÌÅ∞ Ï†ÑÏÜ° ÏãúÏûë ${u.value}`),x.post(`${u.value}/auth/google`,null,{headers:{Authorization:`Bearer ${d}`},withCredentials:!0}).then(l=>{console.log("‚úÖ ÏÑúÎ≤Ñ ÏùëÎãµ:",l.data),l.data.result===!0&&(r.setLoggedIn(),_("/dashboard"))}).catch(l=>{console.error("‚ùå ÏÑúÎ≤Ñ ÏöîÏ≤≠ Ïã§Ìå®:",l)})})}).catch(a=>{console.error("‚ùå Firebase Î°úÍ∑∏Ïù∏ Ïã§Ìå®:",a)})},b=()=>{c.value==="admin"&&i.value==="password"?(r.setLoggedIn(),_("/dashboard")):alert("Invalid credentials")};return(s,e)=>{const a=N,d=$,l=P,g=S,m=z,w=G,y=J,q=E,L=D;return C(),A(L,null,{default:t(()=>[o(q,null,{default:t(()=>[o(y,{class:"flex flex-center"},{default:t(()=>[o(w,{style:{width:"300px"}},{default:t(()=>[o(a,null,{default:t(()=>e[2]||(e[2]=[n("div",{class:"text-h6 text-center"},"Login",-1)])),_:1,__:[2]}),o(a,null,{default:t(()=>[o(d,{outlined:"",dense:"",modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=p=>c.value=p),label:"Username",class:"q-mb-md"},null,8,["modelValue"]),o(d,{outlined:"",dense:"",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=p=>i.value=p),label:"Password",type:"password"},null,8,["modelValue"]),o(l,{align:"center"}),o(g,{color:"primary",label:"Î°úÍ∑∏Ïù∏",onClick:b,class:"full-width q-mb-md",style:{height:"44px","font-size":"16px"}})]),_:1}),n("div",K,[n("div",Q,[n("div",W,[n("div",j,[o(m)]),e[3]||(e[3]=n("div",{class:"col-auto text-grey q-mx-sm",style:{"margin-top":"2px","margin-bottom":"2px"}},"SNS LOGIN",-1)),n("div",H,[o(m)])])])]),o(l,{align:"center"},{default:t(()=>[o(g,{class:"full-width google-btn",style:{background:"#fff",color:"#444",border:"1px solid #ddd",height:"44px","font-size":"16px"},onClick:v},{default:t(()=>e[4]||(e[4]=[n("img",{src:"https://developers.google.com/identity/images/g-logo.png",alt:"Google",style:{height:"24px","margin-right":"8px","vertical-align":"middle"}},null,-1),O(" Google Î°úÍ∑∏Ïù∏ ")])),_:1,__:[4]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},lo=R(X,[["__scopeId","data-v-ad0f965e"]]);export{lo as default};
