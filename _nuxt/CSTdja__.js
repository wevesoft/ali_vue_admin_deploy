import{r as f,bG as p,k as d}from"./gW4XaDQe.js";const v=()=>{const t=f(null),l=f(!0),i=f(null),s=()=>{{const e=window.location.hostname,a=window.location.port;return console.log("ðŸ” í™˜ê²½ ê°ì§€:",{hostname:e,port:a,fullUrl:window.location.href}),e==="localhost"||e==="127.0.0.1"||a==="3000"?(console.log("âœ… Development í™˜ê²½ ê°ì§€"),"development"):e.includes("stg")||e.includes("staging")?(console.log("âœ… Staging í™˜ê²½ ê°ì§€"),"staging"):e==="wevesoft.github.io"?(console.log("âœ… GitHub Pages í™˜ê²½ ê°ì§€"),"production"):(console.log("âœ… Production í™˜ê²½ ê°ì§€"),"production")}},r=async()=>{try{l.value=!0,i.value=null;const e=s();console.log("ðŸŒ í˜„ìž¬ í™˜ê²½:",e);const a=window.location.hostname==="wevesoft.github.io"?"/ali_vue_admin_deploy/config.json":"/config.json";console.log("ðŸ“ Config íŒŒì¼ ê²½ë¡œ:",a);const c=await fetch(a);if(!c.ok)throw new Error("ì„¤ì • íŒŒì¼ì„ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");const u=await c.json();t.value=u[e]||u.production,console.log("âš™ï¸ ë¡œë“œëœ ì„¤ì •:",t.value)}catch(e){i.value=e instanceof Error?e.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜",console.error("âŒ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:",e),t.value={apiBase:"http://dev.deallow.kr:8080",apiTimeout:15e3,enableDebug:!1}}finally{l.value=!1}},h=async(e,a={})=>{var n;t.value||await r();const c=`${t.value.apiBase}${e}`,u=t.value.apiTimeout;try{const o=new AbortController,g=setTimeout(()=>o.abort(),u),w=await fetch(c,{...a,signal:o.signal,headers:{"Content-Type":"application/json",...a.headers}});if(clearTimeout(g),!w.ok)throw new Error(`HTTP ${w.status}: ${w.statusText}`);return await w.json()}catch(o){throw(n=t.value)!=null&&n.enableDebug&&console.error("âŒ API í˜¸ì¶œ ì‹¤íŒ¨:",o),o}};return r(),{config:p(t),loading:p(l),error:p(i),loadConfig:r,apiCall:h,getEnvironment:s}},y=()=>{const{config:t,loading:l,error:i,apiCall:s}=v(),r=d(()=>{var n,o,g;return(n=t.value)!=null&&n.apiBase?(console.log("âœ… Config.jsonì—ì„œ API Base ì‚¬ìš©:",t.value.apiBase),t.value.apiBase):(console.log("ðŸ”§ API Base ì„¤ì •:",{hostname:window.location.hostname,port:window.location.port,isLocalhost:window.location.hostname==="localhost"||window.location.port==="3000"}),window.location.hostname==="localhost"||window.location.port==="3000"?(console.log("âœ… Localhost API ì‚¬ìš©: http://localhost:8081"),"http://localhost:8081"):(console.log("ðŸŒ Remote API ì‚¬ìš©:",((o=t.value)==null?void 0:o.apiBase)||"http://dev.deallow.kr:8080"),((g=t.value)==null?void 0:g.apiBase)||"http://dev.deallow.kr:8080"))}),h=d(()=>"http://localhost:8080"),e=d(()=>"https://dev-api.wevesoft.com"),a=d(()=>"https://stg-api.wevesoft.com"),c=d(()=>"https://api.wevesoft.com"),u={async get(n,o){const g=o?`?${new URLSearchParams(o).toString()}`:"";return await s(`${n}${g}`,{method:"GET"})},async post(n,o){return await s(n,{method:"POST",body:o?JSON.stringify(o):void 0})},async put(n,o){return await s(n,{method:"PUT",body:o?JSON.stringify(o):void 0})},async delete(n){return await s(n,{method:"DELETE"})},async upload(n,o){return await s(n,{method:"POST",body:o,headers:{}})}};return{config:p(t),loading:p(l),error:p(i),apiBase:r,apiBaseLocal:h,apiBaseDev:e,apiBaseStg:a,apiBasePrd:c,api:u,debug:()=>{console.log("ðŸ”§ API ì„¤ì • ì •ë³´:",{apiBase:r.value,environment:t.value,loading:l.value,error:i.value})}}};export{y as u};
